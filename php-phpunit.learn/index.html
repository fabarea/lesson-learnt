



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://learn.omic.ch/php-phpunit.learn/">
      
      
        <meta name="author" content="Fabien Udriot">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>PHP - PHPUnit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#install-testing-framework" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://learn.omic.ch" title="Lesson learnt!" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Lesson learnt!
            </span>
            <span class="md-header-nav__topic">
              
                PHP - PHPUnit
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/fabarea/lesson-learnt/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://learn.omic.ch" title="Lesson learnt!" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Lesson learnt!
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/fabarea/lesson-learnt/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../bash-scaffold.learn/" title="Bash - script scaffold" class="md-nav__link">
      Bash - script scaffold
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../bash.learn/" title="Bash - my stubborn donkey" class="md-nav__link">
      Bash - my stubborn donkey
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-bitcoins/" title="Blockchain - Bitcoins" class="md-nav__link">
      Blockchain - Bitcoins
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-boinc.learn/" title="Boinc" class="md-nav__link">
      Boinc
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-fusion.learn/" title="BlockChain - Fusion" class="md-nav__link">
      BlockChain - Fusion
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-gridcoin.learn/" title="BlockChain - GridCoin" class="md-nav__link">
      BlockChain - GridCoin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-hex/" title="Blockchain - HEX" class="md-nav__link">
      Blockchain - HEX
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-iot.learn/" title="BlockChain - IoT" class="md-nav__link">
      BlockChain - IoT
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../blockchain-talos.learn/" title="BlockChain - Talos" class="md-nav__link">
      BlockChain - Talos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker-doxygen.learn/" title="Docker- Doxygen" class="md-nav__link">
      Docker- Doxygen
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker-mariadb.learn/" title="Docker - MariaDB and MySQL" class="md-nav__link">
      Docker - MariaDB and MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker-php.learn/" title="Docker - PHP" class="md-nav__link">
      Docker - PHP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker.learn/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../editor-atom.learn/" title="Atom-editor" class="md-nav__link">
      Atom-editor
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../editor-sublime.learn/" title="Sublime" class="md-nav__link">
      Sublime
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../firewall-iptables.learn/" title="Firewall - iptables" class="md-nav__link">
      Firewall - iptables
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../firewall-ufw.learn/" title="Firewall - UFW" class="md-nav__link">
      Firewall - UFW
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ide.resource/" title="IDE online" class="md-nav__link">
      IDE online
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../inotify.learn/" title="Inotify - file watcher" class="md-nav__link">
      Inotify - file watcher
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../kubernetes-microk8s.learn/" title="Kubernetes - MicroK8s" class="md-nav__link">
      Kubernetes - MicroK8s
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../kubernetes.learn/" title="Kubernetes - MicroK8s" class="md-nav__link">
      Kubernetes - MicroK8s
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../machine-learning.learn/" title="Machine-learning" class="md-nav__link">
      Machine-learning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../makefile.learn/" title="Makefile - scaffolding" class="md-nav__link">
      Makefile - scaffolding
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php-composer.learn/" title="PHP - Composer" class="md-nav__link">
      PHP - Composer
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php-fpm.learn/" title="PHP - FPM" class="md-nav__link">
      PHP - FPM
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php-phpcs.learn/" title="PHP - PHPCS" class="md-nav__link">
      PHP - PHPCS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php-phpmd.learn/" title="PHP - PHPmd" class="md-nav__link">
      PHP - PHPmd
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php-phpspec.learn/" title="PHP - Phpspec" class="md-nav__link">
      PHP - Phpspec
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        PHP - PHPUnit
      </label>
    
    <a href="./" title="PHP - PHPUnit" class="md-nav__link md-nav__link--active">
      PHP - PHPUnit
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-can-i-run-typo3-unit-tests" class="md-nav__link">
    How can I run TYPO3 unit tests?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-phpini-scanner-for-best-security-practices" class="md-nav__link">
    A php.ini scanner for best security practices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#we-can-use-a-php-wrapper" class="md-nav__link">
    We can use a PHP wrapper
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helmut-blog" class="md-nav__link">
    Helmut blog
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phpstorm-preferences" class="md-nav__link">
    PHPStorm preferences
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edit-configuration" class="md-nav__link">
    Edit configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-i-test-a-protected-method" class="md-nav__link">
    How can I test a protected method?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-double" class="md-nav__link">
    Test Double
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functional-test" class="md-nav__link">
    Functional Test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-use-composer-for-unit-and-functional-tests-in-travis" class="md-nav__link">
    [TASK] Use composer for unit and functional tests in travis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter-test" class="md-nav__link">
    Filter test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-method" class="md-nav__link">
    Private Method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#provider" class="md-nav__link">
    Provider
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extends" class="md-nav__link">
    Extends
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checklist" class="md-nav__link">
    CheckList
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-stub" class="md-nav__link">
    Configure Stub
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matchers" class="md-nav__link">
    Matchers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-about-mocking-with-phpunit-article" class="md-nav__link">
    All About Mocking with PHPUnit - article
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-familiar-with-phpunit-mocks-cakephp" class="md-nav__link">
    Getting familiar with PHPUnit Mocks (CakePHP)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slides-about-new-features-in-phpunit-33" class="md-nav__link">
    Slides about new features in PHPUnit 3.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behaviour-driven-development" class="md-nav__link">
    BEHAVIOUR DRIVEN DEVELOPMENT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getmock-will" class="md-nav__link">
    getMock will
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getmock-once" class="md-nav__link">
    getMock once
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vfsstream-mocking-file" class="md-nav__link">
    VFSSTREAM - MOCKING FILE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception-with-phpunit" class="md-nav__link">
    Exception with phpunit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#improved-skeleton-generator-in-phpunit-3" class="md-nav__link">
    Improved Skeleton Generator in PHPUnit 3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-unitaire-junit" class="md-nav__link">
    TEST UNITAIRE JUNIT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-to-scenario-phpspec" class="md-nav__link">
    ALTERNATIVE TO SCENARIO - PHPSPEC
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php-quick-template-engine.learn/" title="PHP - Quick template engine" class="md-nav__link">
      PHP - Quick template engine
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../php.learn/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../presentation-tools.learn/" title="Tool - WebSlides & Talk" class="md-nav__link">
      Tool - WebSlides & Talk
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../python-flask.learn/" title="Python - Flask" class="md-nav__link">
      Python - Flask
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../python.learn/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../sveltejs.learn/" title="SvelteJS" class="md-nav__link">
      SvelteJS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../t3-install.learn/" title="TYPO3 - Install" class="md-nav__link">
      TYPO3 - Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../t3.learn/" title="TYPO3 - knowledge base" class="md-nav__link">
      TYPO3 - knowledge base
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ubuntu-fan.learn/" title="How to reduce the fan noise?" class="md-nav__link">
      How to reduce the fan noise?
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-can-i-run-typo3-unit-tests" class="md-nav__link">
    How can I run TYPO3 unit tests?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-phpini-scanner-for-best-security-practices" class="md-nav__link">
    A php.ini scanner for best security practices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#we-can-use-a-php-wrapper" class="md-nav__link">
    We can use a PHP wrapper
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helmut-blog" class="md-nav__link">
    Helmut blog
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#phpstorm-preferences" class="md-nav__link">
    PHPStorm preferences
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edit-configuration" class="md-nav__link">
    Edit configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-i-test-a-protected-method" class="md-nav__link">
    How can I test a protected method?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-double" class="md-nav__link">
    Test Double
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functional-test" class="md-nav__link">
    Functional Test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-use-composer-for-unit-and-functional-tests-in-travis" class="md-nav__link">
    [TASK] Use composer for unit and functional tests in travis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter-test" class="md-nav__link">
    Filter test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-method" class="md-nav__link">
    Private Method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#provider" class="md-nav__link">
    Provider
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extends" class="md-nav__link">
    Extends
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checklist" class="md-nav__link">
    CheckList
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-stub" class="md-nav__link">
    Configure Stub
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matchers" class="md-nav__link">
    Matchers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-about-mocking-with-phpunit-article" class="md-nav__link">
    All About Mocking with PHPUnit - article
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-familiar-with-phpunit-mocks-cakephp" class="md-nav__link">
    Getting familiar with PHPUnit Mocks (CakePHP)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slides-about-new-features-in-phpunit-33" class="md-nav__link">
    Slides about new features in PHPUnit 3.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#behaviour-driven-development" class="md-nav__link">
    BEHAVIOUR DRIVEN DEVELOPMENT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getmock-will" class="md-nav__link">
    getMock will
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getmock-once" class="md-nav__link">
    getMock once
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vfsstream-mocking-file" class="md-nav__link">
    VFSSTREAM - MOCKING FILE
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exception-with-phpunit" class="md-nav__link">
    Exception with phpunit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#improved-skeleton-generator-in-phpunit-3" class="md-nav__link">
    Improved Skeleton Generator in PHPUnit 3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-unitaire-junit" class="md-nav__link">
    TEST UNITAIRE JUNIT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-to-scenario-phpspec" class="md-nav__link">
    ALTERNATIVE TO SCENARIO - PHPSPEC
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/fabarea/lesson-learnt/edit/master/public/php-phpunit.learn.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="install-testing-framework">Install Testing Framework</h1>
<p><a href="https://www.youtube.com/watch?v=9zoHWNR5OcQ">https://www.youtube.com/watch?v=9zoHWNR5OcQ</a></p>
<ol>
<li>
<p>Install the testing Framework </p>
<p>composer require --dev typo3/testing-framework</p>
</li>
<li>
<p>Make sure we have PHP binary executable in PHPStorm settings, xdebug must be installed </p>
</li>
<li>Use Composer autoload to load PHPunit</li>
<li>Edit configuration and TYPO3_PATH_ROOT = /Users/fudriot/</li>
<li>Default configuration should be taken from EXT:core</li>
</ol>
<h2 id="how-can-i-run-typo3-unit-tests">How can I run TYPO3 unit tests?</h2>
<p>For TYPO3 core:</p>
<pre><code class="php">vendor/bin/phpunit -c typo3/sysext/Core/Build/UnitTest.xml
</code></pre>

<p>For a TYPO3 extension:</p>
<pre><code class="php">vendor/bin/phpunit -c vendor/typo3/testing-framework/Resources/Core/Build/UnitTests.xml web/typo3conf/ext/userjungfrausite/Tests/Unit/
</code></pre>

<p>It can be hand to have a quick <code>Makefile</code> to watch the file system and run the Unit Tests on file change.</p>
<pre><code class="makefile">VENDOR ?= &quot;../../../../vendor&quot;

P=&quot;\\033[34m[+]\\033[0m&quot;

help:
    @echo
    @echo &quot;  \033[34munit-tests\033[0m – Unit test the extension.&quot;
    @echo &quot;  \033[34mwatch\033[0m      – Watch the PHP unit files and run unit tests upon file change.&quot;
    @echo

unit-tests:
    @echo &quot;  $(P) Unit Tests&quot;
    @$(VENDOR)/bin/phpunit -c $(VENDOR)/typo3/testing-framework/Resources/Core/Build/UnitTests.xml Tests/Unit

watch:
    @echo &quot;  $(P) Unit Tests&quot;
    @while inotifywait -e close_write Tests/Unit/* -e close_write Classes/Service/*; do make unit-tests; done

.PHONY: help unit-tests watch
</code></pre>

<h2 id="a-phpini-scanner-for-best-security-practices">A php.ini scanner for best security practices</h2>
<p><a href="https://github.com/psecio/iniscan">https://github.com/psecio/iniscan</a> (instruction how to install was not accurate, wrote an issue)</p>
<h2 id="we-can-use-a-php-wrapper">We can use a PHP wrapper</h2>
<p>TODO: check with me!</p>
<pre><code class="sh">/Users/fudriot/Forge/PHPUnit/bin/php
</code></pre>

<h2 id="helmut-blog">Helmut blog</h2>
<p><a href="http://www.derhansen.de/2014/06/standalone-unit-and-functional-tests.html">http://www.derhansen.de/2014/06/standalone-unit-and-functional-tests.html</a> (&lt;-- look here)
<a href="http://insight.helhum.io/post/63972451370/executing-typo3-cms-unit-test-tests-in-phpstorm">http://insight.helhum.io/post/63972451370/executing-typo3-cms-unit-test-tests-in-phpstorm</a></p>
<h2 id="phpstorm-preferences">PHPStorm preferences</h2>
<ul>
<li>Configure Core <code>cd typo3_src; composer install</code></li>
<li>Configure interpreter</li>
<li>Configure path phpunit</li>
</ul>
<h2 id="edit-configuration">Edit configuration</h2>
<p>With images:</p>
<pre><code>open /Users/fudriot/Documents/Courses/PhpUnit/ConfigurePhpStorm.png
open /Users/fudriot/Documents/Courses/PhpUnit/ConfigurePhpStormPhpunitPath.png
</code></pre>
<ul>
<li>
<p>Use alternative configuration file
            -&gt; open typo3_src/sysext/core/Build/UnitTests.xml</p>
</li>
<li>
<p>Environment variables
    TYPO3_PATH_WEB=/Users/fudriot/Sites/Visol/easyvote.ch/htdocs (don't forget)</p>
</li>
</ul>
<p>typo3DatabaseName="unittest"  typo3DatabaseHost="localhost"  typo3DatabaseUsername="root" typo3DatabasePassword="root" \
./bin/phpunit -c typo3/sysext/core/Build/FunctionalTests.xml</p>
<p>typo3/sysext/impexp/Tests/Functional/ImportFromVersionFourDotFive/PagesAndTtContentWithRteImagesAndFileLink/ImportInEmptyDatabaseTest.php</p>
<pre><code>/**
 * @return void
 */
public function setUp() 
{
    parent::setUp();
}

/**
 * @return void
 */
public function tearDown() 
{
    parent::tearDown();
}
</code></pre>
<h2 id="how-can-i-test-a-protected-method">How can I test a protected method?</h2>
<pre><code class="php">$method = new \ReflectionMethod(
    \ClassName::class,
    'buildUrl'
);
$method-&gt;setAccessible(TRUE);
$this-&gt;assertEquals(
    'blah',
    $method-&gt;invoke(new \ClassName(), 'args1')
);
</code></pre>

<h2 id="test-double">Test Double</h2>
<pre><code class="php">$extractorObject1 = $this-&gt;getMock(
    \TYPO3\CMS\Core\Resource\Index\ExtractorInterface::class,
    array(),
    array(),
    $extractorClass1
);

$extractorObject1
    -&gt;expects(
        $this-&gt;any()
    )
    -&gt;method('getPriority')-&gt;will($this-&gt;returnValue(1))
);
</code></pre>

<h2 id="functional-test">Functional Test</h2>
<p>phpunit -c typo3/sysext/core/Build/FunctionalTests.xml typo3/sysext/core/Tests/Functional</p>
<h2 id="task-use-composer-for-unit-and-functional-tests-in-travis">[TASK] Use composer for unit and functional tests in travis</h2>
<p><a href="https://review.typo3.org/#/c/29495">https://review.typo3.org/#/c/29495</a></p>
<p>The patch uses composer based dependency handling and other
stuff pushing travis-ci tests to the next level:</p>
<ul>
<li>phpunit registered as "dev" requirement in composer.json</li>
<li>vfsStream registered as "dev" requirement in composer.json</li>
<li>cms-composer-installers is not released stable and adapted
    in composer.json for successful dependency resolving via
    composer</li>
<li>cloning travis-integration repository is obsolete by inlining
    scripts in .travis.yml</li>
<li>cloning ext:phpunit is obsolete, native phpunit by composer
    is used now</li>
<li>it is possible to set functional test suite database credentials
    with environment variables, used in .travis.yml</li>
<li>redis cache backend tests are enabled on travis-ci again</li>
<li>use existing php modules of travis-ci environment speeds up build</li>
</ul>
<p>With phpunit from composer, the command to run tests is
./bin/phpunit -c typo3/sysext/core/Build/UnitTests.xml
More documentation about that can be found at
<a href="http://wiki.typo3.org/Unit_Testing_TYPO3">http://wiki.typo3.org/Unit_Testing_TYPO3</a></p>
<h2 id="filter-test">Filter test</h2>
<pre><code>•   you can use the @group tag in the class documentation to indicate the group and then run tests only on that group using --group
•   you can use     er to only run tests that match a given regex
</code></pre>
<h2 id="private-method">Private Method</h2>
<pre><code>/**
 * @test
 */
public function getMarkerTemplateReturnsDefaultMarker() 
{
    $method = new ReflectionMethod(
        'Tx_ManpowerEmailtemplates_Domain_Model_Template', 'getMarkerTemplate'
    );

    $method-&gt;setAccessible(TRUE);

    $actual = $method-&gt;invoke($this-&gt;fixture);
    $actual = $method-&gt;invokeArgs($this-&gt;fixture, array($foo));
}
</code></pre>
<h2 id="provider">Provider</h2>
<pre><code>/**
 * @test
 * @dataProvider propertyProvider
 */
public function testProperty($propertyName, $value) 
{
    $setter = 'set' . ucfirst($propertyName);
    $getter = 'get' . ucfirst($propertyName);
    $actual = call_user_func_array(array($this-&gt;fixture, $setter), array($value));
    $this-&gt;assertTrue($actual instanceof Tx_ManpowerSearchform_Domain_Model_Subsidiary);
    $this-&gt;assertEquals($value, call_user_func(array($this-&gt;fixture, $getter)));
}

/**
 * Provider
 */
public function propertyProvider() 
{
    return array(
        array('markers', uniqid('foo')),
        array('addAttachment', t3lib_extMgm::extPath('manpower_emailtemplates') . 'Tests/Resources/Sample.pdf'),
        array('dryRun', NULL),
    );
}
</code></pre>
<h2 id="extends">Extends</h2>
<p>class QueryTest extends \TYPO3\CMS\Core\Tests\UnitTestCase {
class QueryTest extends \TYPO3\CMS\Extbase\Tests\Unit\BaseTestCase {</p>
<h2 id="checklist">CheckList</h2>
<ol>
<li>variable is exported</li>
</ol>
<p>export ENV_TYPO3_SITE_PATH='/Users/fudriot/Sites/Ecodev/bootstrap.master/htdocs'
export ENV_DEBUG=1</p>
<ol>
<li>
<p>PHP Interpreter is configured in PHPStorm</p>
</li>
<li>
<p>EXT:phpunit is installed
    git clone git://git.typo3.org/TYPO3CMS/Extensions/phpunit.git</p>
</li>
<li>
<p>BE User _cli_phpunit exists</p>
</li>
</ol>
<h2 id="configure-stub">Configure Stub</h2>
<p><a href="http://www.phpunit.de/manual/current/en/test-doubles.html">http://www.phpunit.de/manual/current/en/test-doubles.html</a></p>
<h2 id="matchers">Matchers</h2>
<p><a href="http://stackoverflow.com/questions/7432458/phpunit-expects-method-meaning">http://stackoverflow.com/questions/7432458/phpunit-expects-method-meaning</a></p>
<p>any() returns a matcher that matches when the method it is evaluated for is executed zero or more times.
never() returns a matcher that matches when the method it is evaluated for is never executed.
atLeastOnce() returns a matcher that matches when the method it is evaluated for is executed at least once.
once() returns a matcher that matches when the method it is evaluated for is executed exactly once.
exactly(int $count) returns a matcher that matches when the method it is evaluated for is executed exactly $count times.
at(int $index) returns a matcher that matches when the method it is evaluated for is invoked at the given $index</p>
<h2 id="all-about-mocking-with-phpunit-article">All About Mocking with PHPUnit - article</h2>
<p><a href="http://net.tutsplus.com/tutorials/php/all-about-mocking-with-phpunit/">http://net.tutsplus.com/tutorials/php/all-about-mocking-with-phpunit/</a></p>
<h2 id="getting-familiar-with-phpunit-mocks-cakephp">Getting familiar with PHPUnit Mocks (CakePHP)</h2>
<p><a href="http://mark-story.com/posts/view/getting-familiar-with-phpunit-mocks">http://mark-story.com/posts/view/getting-familiar-with-phpunit-mocks</a></p>
<pre><code class="php">$mock = $this-&gt;getMock('Thing');
$mock-&gt;expects($this-&gt;at(0))-&gt;method('send')
    -&gt;with('one', 'two')
    -&gt;will($this-&gt;returnValue(true));

/*
•   once() Will fail if the method is called more than once, or less than once.
•   never() Will fail if the method is called ever.
•   any() Will always match
•   at($index) Will match at call $index. A very important and possibly irritating difference between the SimpleTest implementation is the index increments each time a mock method is called, not just when the indicated method is called.
•   exactly($times) Will only pass if the method is called $times. I find this one doesn’t work well with with().
•   atLeastOnce() Will pass if the method is called more than once.
*/
</code></pre>

<p>Usually, the next thing in the chain is a method($methodName) call, which specifies which method the expectation is for. Following method() is usually one or both of with() and will(). Parameter expectations are supplied as parameters to with(). You can either supply the literal values you are expecting, or one of the many constraint objects PHPUnit has. Return values for mocked methods are set with will(). Will accepts a ‘stub’ as its parameter, and there are several built in stub types.
    •   returnValue($value) Return a literal value, like a string or an array or a boolean.
    •   throwException($exception) Make the method throw an exception.
    •   returnArgument($index) Return the argument at $index
    •   returnCallback() Allows you to return ‘callback type’ results. For example in PHP5.3 you can return anonymous functions.
    •   onConsecutiveCalls() Allows you to setup a return value ‘script’. This allows you to setup a number of return values that will be returned in the sequence they are provided. This stub works best with either any() or atLeastOnce() in my experience.</p>
<h2 id="slides-about-new-features-in-phpunit-33">Slides about new features in PHPUnit 3.3</h2>
<h2 id="behaviour-driven-development">BEHAVIOUR DRIVEN DEVELOPMENT</h2>
<p><a href="http://www.slideshare.net/sebastian_bergmann/new-features-in-phpunit-33">http://www.slideshare.net/sebastian_bergmann/new-features-in-phpunit-33</a></p>
<p><a href="http://blog.daveastels.com/files/BDD_Intro.pdf">http://blog.daveastels.com/files/BDD_Intro.pdf</a></p>
<h2 id="getmock-will">getMock will</h2>
<pre><code>$mockObject = $this-&gt;getMock('t3lib_cache_Manager', array('getCache'));
$mockObject-&gt;expects($this-&gt;any())-&gt;method('getCache')-&gt;will($this-&gt;returnValue($mockCache));
</code></pre>
<h2 id="getmock-once">getMock once</h2>
<pre><code>$registryMock = $this-&gt;getMock('t3lib_category_Registry', array('add'));
$registryMock-&gt;expects($this-&gt;once())-&gt;method('add')-&gt;with($extensionKey, $tableName, $fieldName);
t3lib_div::setSingletonInstance('t3lib_category_Registry', $registryMock);
</code></pre>
<h2 id="vfsstream-mocking-file">VFSSTREAM - MOCKING FILE</h2>
<p><a href="https://github.com/mikey179/vfsStream/wiki">https://github.com/mikey179/vfsStream/wiki</a></p>
<p><a href="http://www.stubbles.org/">http://www.stubbles.org/</a></p>
<h2 id="exception-with-phpunit">Exception with phpunit</h2>
<pre><code class="php"> /**
  * @expectedException MyExceptionClass
  * @expectedExceptionMessage Array too small
  */
</code></pre>

<p>OR</p>
<pre><code class="php">$this-&gt;setExpectedException('Exception');
</code></pre>

<h2 id="improved-skeleton-generator-in-phpunit-3">Improved Skeleton Generator in PHPUnit 3</h2>
<p><a href="http://sebastian-bergmann.de/archives/628-Improved-Skeleton-Generator-in-PHPUnit-3.html">http://sebastian-bergmann.de/archives/628-Improved-Skeleton-Generator-in-PHPUnit-3.html</a></p>
<h2 id="test-unitaire-junit">TEST UNITAIRE JUNIT</h2>
<p>-&gt; aussi tester simpletest
<a href="http://www.onpk.net/index.php/2008/05/23/449-au-revoir-selenium-simpletest-revient-et-jqunit-arrive">http://www.onpk.net/index.php/2008/05/23/449-au-revoir-selenium-simpletest-revient-et-jqunit-arrive</a></p>
<p>Test qualité:</p>
<ul>
<li>PHP_CodeSniffer tokenises PHP, JavaScript and CSS files and detects violations of a defined set of coding standards.</li>
<li>phpmd scans PHP source code and looks for potential problems such as possible bugs, suboptimal code or overcomplicated expressions.</li>
<li>phpcpd is a Copy/Paste Detector (CPD) for PHP code.</li>
<li>PHP_Depend is a PHP software metrics tool.</li>
<li>PHPUnit is the de-facto standard unit test framework for PHP.</li>
</ul>
<p><a href="http://sebastian-bergmann.de/archives/856-Quality-Assurance-Tools-for-PHP.html">http://sebastian-bergmann.de/archives/856-Quality-Assurance-Tools-for-PHP.html</a></p>
<p>Fixtures:
A test fixture is something used to consistently test some item, device, or piece of software.
<a href="http://www.phpunit.de/manual/3.4/en/fixtures.html">http://www.phpunit.de/manual/3.4/en/fixtures.html</a></p>
<h2 id="alternative-to-scenario-phpspec">ALTERNATIVE TO SCENARIO - PHPSPEC</h2>
<p><a href="http://devzone.zend.com/article/3082">http://devzone.zend.com/article/3082</a> (good article)
   Story: I have a savings and current account and I want
        to transfer money from savings to current.</p>
<pre><code>Scenario: savings account has enough money
    Given my savings account balance is 100
    And my current account balance is 50
    When I transfer 20 from savings to current
    Then my savings account balance should be 80
    And my current account balance should be 70
</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../php-phpspec.learn/" title="PHP - Phpspec" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                PHP - Phpspec
              </span>
            </div>
          </a>
        
        
          <a href="../php-quick-template-engine.learn/" title="PHP - Quick template engine" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                PHP - Quick template engine
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>