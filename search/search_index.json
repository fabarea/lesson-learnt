{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"This is a living document that I am regularly updating when making new findings. The content is generarted by mkdocs with the material design theme. In the future, I could have a look at docz which brings the power of mdx support. Let see... My notes are taking with Typora which is a great tool. Although not Open Source, the tool is free. The tool is not perfect though. For instance, I am missing the space indentation options. Visual Studio could be an option. Finding a good plugins.","title":"Home"},{"location":"bash-scaffold.learn/","text":"How would you scaffold your bash script? I found inspiring the way the rustup script is architectured... To be personalized of course. Source: curl https://static.rust-lang.org/rustup.sh | less Extract of the script: #!/bin/bash set -u # Undefined variables are errors main() { assert_cmds set_globals handle_command_line_args \"$@\" } # Help print_help() { echo ' Usage: rustup.sh [--verbose] Options: --channel=(stable|beta|nightly) Install from channel (default stable) --date=<YYYY-MM-DD> Install from archives --revision=<version-number> Install a specific release --spec=<toolchain-spec> Install from toolchain spec --prefix=<path> Install to a specific location (default /usr/local) --uninstall Uninstall instead of install --disable-ldconfig Do not run ldconfig on Linux --disable-sudo Do not run installer under sudo --save Save downloads for future reuse --yes, -y Disable the interactive mode ' } # Standard utilities arguments: BRANCH, DIR (optional) ================================= say() { echo \"rustup: $1\" } say_err() { say \"$1\" >&2 } verbose_say() { if [ \"$flag_verbose\" = true ]; then say \"$1\" fi } err() { say \"$1\" >&2 exit 1 } need_cmd() { if ! command -v \"$1\" > /dev/null 2>&1 then err \"need $1\" fi } need_ok() { if [ $? != 0 ]; then err \"$1\"; fi } assert_nz() { if [ -z \"$1\" ]; then err \"assert_nz $2\"; fi } # Run a command that should never fail. If the command fails execution # will immediately terminate with an error showing the failing # command. ensure() { \"$@\" need_ok \"command failed: $*\" } # This is just for indicating that commands' results are being # intentionally ignored. Usually, because it's being executed # as part of error handling. ignore() { run \"$@\" } # Runs a command and prints it to stderr if it fails. run() { \"$@\" local _retval=$? if [ $_retval != 0 ]; then say_err \"command failed: $*\" fi return $_retval } main \"$@\"","title":"Bash - script scaffold"},{"location":"bash-scaffold.learn/#how-would-you-scaffold-your-bash-script","text":"I found inspiring the way the rustup script is architectured... To be personalized of course. Source: curl https://static.rust-lang.org/rustup.sh | less Extract of the script: #!/bin/bash set -u # Undefined variables are errors main() { assert_cmds set_globals handle_command_line_args \"$@\" } # Help print_help() { echo ' Usage: rustup.sh [--verbose] Options: --channel=(stable|beta|nightly) Install from channel (default stable) --date=<YYYY-MM-DD> Install from archives --revision=<version-number> Install a specific release --spec=<toolchain-spec> Install from toolchain spec --prefix=<path> Install to a specific location (default /usr/local) --uninstall Uninstall instead of install --disable-ldconfig Do not run ldconfig on Linux --disable-sudo Do not run installer under sudo --save Save downloads for future reuse --yes, -y Disable the interactive mode ' } # Standard utilities arguments: BRANCH, DIR (optional) ================================= say() { echo \"rustup: $1\" } say_err() { say \"$1\" >&2 } verbose_say() { if [ \"$flag_verbose\" = true ]; then say \"$1\" fi } err() { say \"$1\" >&2 exit 1 } need_cmd() { if ! command -v \"$1\" > /dev/null 2>&1 then err \"need $1\" fi } need_ok() { if [ $? != 0 ]; then err \"$1\"; fi } assert_nz() { if [ -z \"$1\" ]; then err \"assert_nz $2\"; fi } # Run a command that should never fail. If the command fails execution # will immediately terminate with an error showing the failing # command. ensure() { \"$@\" need_ok \"command failed: $*\" } # This is just for indicating that commands' results are being # intentionally ignored. Usually, because it's being executed # as part of error handling. ignore() { run \"$@\" } # Runs a command and prints it to stderr if it fails. run() { \"$@\" local _retval=$? if [ $_retval != 0 ]; then say_err \"command failed: $*\" fi return $_retval } main \"$@\"","title":"How would you scaffold your bash script?"},{"location":"bash.learn/","text":"My stubborn donkey Bash is like a donkey - although I like these animals very much - very stubborn but at the same time very useful . Writing bash scripts is a quite a frustrating experience if I am honest. Bash makes things hard and inflexible. It looks however as a necessary pain since bash is installed and is the default shell on almost every distributions. This is the garantee that it will work. I am often looking for alternatives (such as OSH shell ) or hoping bash would improve to offer a better user experience. We have bash 5 recently released but don't see any roadmap although the development looks active. Let see how it will evolve... Anyway here are a few notes and resources I gathered to make my life easier. Also, worth to be mentioned, the jetbrains bash plugin is very useful associated with the bash linter. It provides many tips and tricks that an occasional \"basher\" would not know. Next generation UNIX shell. See the man page. https://github.com/ilyash/ngs/ Fish fish is a smart and user-friendly command line shell for OS X, Linux, and the rest of the family. https://fishshell.com/ Alternatives Next Generation Shell (NGS) - https://github.com/ilyash/ngs Oil shell - http://www.oilshell.org/ Web-Terminal is a terminal server that provides remote CLI via standard web browser and HTTP protocol. - https://github.com/rabchev/web-terminal How can I loop in bash? There are various way to look. Here would be one way. #!/bin/bash SOURCE_PATH=\"$HOME/pCloudDrive/Fabien/Notes\" files=( 'blockchain-fusion.learn.md' 'blockchain-gridcoin.learn.md' 'blockchain-iot.learn.md' 'blockchain-talos.learn.md' ) # Set counter variable counter=0 # shellcheck disable=SC2068 for file in ${files[@]}; do sourceFileNameAndPath=\"$SOURCE_PATH/$file\" if [ -f \"$sourceFileNameAndPath\" ]; then # ... do something here # shellcheck disable=SC2004 counter=$(( $counter + 1 )) fi done echo \"Done! Processed $counter files\" How can I loop around files? # shellcheck disable=SC2231 for file in /path/*.learn.md; do # ... do something echo \"$file\" done The same could be accomplished with: #!/bin/bash find . -name \"*.md\" -depth 1 | while read filename do echo \"$filename\" done How do I increment a counter in a loop? counter=0 # shellcheck disable=SC2004 counter=$(($counter + 1)) How do I write function with a returned values? Simple function that will return a formatted current date: function getCurrentDate() { local currentDate currentDate=$(date '+%m-%d-%Y @ %H:%M') echo \"$currentDate\" } result=$(getCurrentDate) echo $result Same as above but a bit more straightforward: function getCurrentDate() { date '+%m-%d-%Y @ %H:%M' } result=$(getCurrentDate) echo $result A little collection of cool unix terminal/console/curses tools http://kkovacs.eu/cool-but-obscure-unix-tools/ Quelques bonnes pratiques dans l'\u00e9criture de scripts en Bash http://ineumann.developpez.com/tutoriels/linux/bash-bonnes-pratiques/#LIII-C What are the good practices? Define the shebang #!/usr/bin/env bash Right below on the top: set -e # exit the script if any statement returns non-true return value set -u # abort on unbound variable set -o pipefail # don't hide errors within pipes # Short version set -euo pipefail Return a status code exit $? Example how to check if script runs longer than 2 hours root\\@srv123:/home/mstucki\\# cat /etc/cron.hourly/kill-old-sphinx-tasks \\#!/bin/bash if [ `id -u` != 0 ]; then echo \"You are not root.\" exit 1 fi USERNAME=\"mbless\" COMMAND=\"sphinx-build\" AGE=180 find /proc -maxdepth 1 -user $$USERNAME -type d -mmin +$$AGE -exec basename {} ; \\| xargs -r ps \\| grep \\$COMMAND \\| awk '{print \\$1}' \\| while read PID; do echo \"Killing task: \\$PID\" echo \"======================================================\" ps u \\$PID echo \"======================================================\" echo kill $PID done Bash Keyboard Shortcuts Yes, like on a piano! :musical_keyboard: http://ss64.com/bash/syntax-keyboard.html Curly bracket http://www.linuxjournal.com/content/bash-brace-expansion {aa,bb,cc,dd} => aa bb cc dd {0..12} => 0 1 2 3 4 5 6 7 8 9 10 11 12 {3..-2} => 3 2 1 0 -1 -2 {a..g} => a b c d e f g {g..a} => g f e d c b a Cheat sheet http://www.pixelbeat.org/cmdline.html https://bertvv.github.io/cheat-sheets/Bash.html Revue des techniques de programmation en shell Advanced concept there https://linuxfr.org/news/revue-des-techniques-de-programmation-en-shell (french) Pure bash bible It looks some guy have smoke quite some strong stuff! https://github.com/dylanaraps/pure-bash-bible Hyperpolyglot Unix Shells: Bash, Fish, Ksh, Tcsh, Zsh. Syntax comparison http://hyperpolyglot.org/unix-shells","title":"Bash - my stubborn donkey"},{"location":"bash.learn/#my-stubborn-donkey","text":"Bash is like a donkey - although I like these animals very much - very stubborn but at the same time very useful . Writing bash scripts is a quite a frustrating experience if I am honest. Bash makes things hard and inflexible. It looks however as a necessary pain since bash is installed and is the default shell on almost every distributions. This is the garantee that it will work. I am often looking for alternatives (such as OSH shell ) or hoping bash would improve to offer a better user experience. We have bash 5 recently released but don't see any roadmap although the development looks active. Let see how it will evolve... Anyway here are a few notes and resources I gathered to make my life easier. Also, worth to be mentioned, the jetbrains bash plugin is very useful associated with the bash linter. It provides many tips and tricks that an occasional \"basher\" would not know.","title":"My stubborn donkey"},{"location":"bash.learn/#next-generation-unix-shell","text":"See the man page. https://github.com/ilyash/ngs/","title":"Next generation UNIX shell."},{"location":"bash.learn/#fish","text":"fish is a smart and user-friendly command line shell for OS X, Linux, and the rest of the family. https://fishshell.com/","title":"Fish"},{"location":"bash.learn/#alternatives","text":"Next Generation Shell (NGS) - https://github.com/ilyash/ngs Oil shell - http://www.oilshell.org/ Web-Terminal is a terminal server that provides remote CLI via standard web browser and HTTP protocol. - https://github.com/rabchev/web-terminal","title":"Alternatives"},{"location":"bash.learn/#how-can-i-loop-in-bash","text":"There are various way to look. Here would be one way. #!/bin/bash SOURCE_PATH=\"$HOME/pCloudDrive/Fabien/Notes\" files=( 'blockchain-fusion.learn.md' 'blockchain-gridcoin.learn.md' 'blockchain-iot.learn.md' 'blockchain-talos.learn.md' ) # Set counter variable counter=0 # shellcheck disable=SC2068 for file in ${files[@]}; do sourceFileNameAndPath=\"$SOURCE_PATH/$file\" if [ -f \"$sourceFileNameAndPath\" ]; then # ... do something here # shellcheck disable=SC2004 counter=$(( $counter + 1 )) fi done echo \"Done! Processed $counter files\"","title":"How can I loop in bash?"},{"location":"bash.learn/#how-can-i-loop-around-files","text":"# shellcheck disable=SC2231 for file in /path/*.learn.md; do # ... do something echo \"$file\" done The same could be accomplished with: #!/bin/bash find . -name \"*.md\" -depth 1 | while read filename do echo \"$filename\" done","title":"How can I loop around files?"},{"location":"bash.learn/#how-do-i-increment-a-counter-in-a-loop","text":"counter=0 # shellcheck disable=SC2004 counter=$(($counter + 1))","title":"How do I increment a counter in a loop?"},{"location":"bash.learn/#how-do-i-write-function-with-a-returned-values","text":"Simple function that will return a formatted current date: function getCurrentDate() { local currentDate currentDate=$(date '+%m-%d-%Y @ %H:%M') echo \"$currentDate\" } result=$(getCurrentDate) echo $result Same as above but a bit more straightforward: function getCurrentDate() { date '+%m-%d-%Y @ %H:%M' } result=$(getCurrentDate) echo $result","title":"How do I write function with a returned values?"},{"location":"bash.learn/#a-little-collection-of-cool-unix-terminalconsolecurses-tools","text":"http://kkovacs.eu/cool-but-obscure-unix-tools/","title":"A little collection of cool unix terminal/console/curses tools"},{"location":"bash.learn/#quelques-bonnes-pratiques-dans-lecriture-de-scripts-en-bash","text":"http://ineumann.developpez.com/tutoriels/linux/bash-bonnes-pratiques/#LIII-C","title":"Quelques bonnes pratiques dans l'\u00e9criture de scripts en Bash"},{"location":"bash.learn/#what-are-the-good-practices","text":"Define the shebang #!/usr/bin/env bash Right below on the top: set -e # exit the script if any statement returns non-true return value set -u # abort on unbound variable set -o pipefail # don't hide errors within pipes # Short version set -euo pipefail Return a status code exit $?","title":"What are the good practices?"},{"location":"bash.learn/#example-how-to-check-if-script-runs-longer-than-2-hours","text":"root\\@srv123:/home/mstucki\\# cat /etc/cron.hourly/kill-old-sphinx-tasks \\#!/bin/bash if [ `id -u` != 0 ]; then echo \"You are not root.\" exit 1 fi USERNAME=\"mbless\" COMMAND=\"sphinx-build\" AGE=180 find /proc -maxdepth 1 -user $$USERNAME -type d -mmin +$$AGE -exec basename {} ; \\| xargs -r ps \\| grep \\$COMMAND \\| awk '{print \\$1}' \\| while read PID; do echo \"Killing task: \\$PID\" echo \"======================================================\" ps u \\$PID echo \"======================================================\" echo kill $PID done","title":"Example how to check if script runs longer than 2 hours"},{"location":"bash.learn/#bash-keyboard-shortcuts","text":"Yes, like on a piano! :musical_keyboard: http://ss64.com/bash/syntax-keyboard.html","title":"Bash Keyboard Shortcuts"},{"location":"bash.learn/#curly-bracket","text":"http://www.linuxjournal.com/content/bash-brace-expansion {aa,bb,cc,dd} => aa bb cc dd {0..12} => 0 1 2 3 4 5 6 7 8 9 10 11 12 {3..-2} => 3 2 1 0 -1 -2 {a..g} => a b c d e f g {g..a} => g f e d c b a","title":"Curly bracket"},{"location":"bash.learn/#cheat-sheet","text":"http://www.pixelbeat.org/cmdline.html https://bertvv.github.io/cheat-sheets/Bash.html","title":"Cheat sheet"},{"location":"bash.learn/#revue-des-techniques-de-programmation-en-shell","text":"Advanced concept there https://linuxfr.org/news/revue-des-techniques-de-programmation-en-shell (french)","title":"Revue des techniques de programmation en shell"},{"location":"bash.learn/#pure-bash-bible","text":"It looks some guy have smoke quite some strong stuff! https://github.com/dylanaraps/pure-bash-bible","title":"Pure bash bible"},{"location":"bash.learn/#hyperpolyglot","text":"Unix Shells: Bash, Fish, Ksh, Tcsh, Zsh. Syntax comparison http://hyperpolyglot.org/unix-shells","title":"Hyperpolyglot"},{"location":"blockchain-fusion.learn/","text":"@see fusion.md in Notes","title":"BlockChain - Fusion"},{"location":"blockchain-gridcoin.learn/","text":"https://steemit.com/cryptocurrency/@daut44/gridcoin-setup-guide-for-mac-os-x-part-1 Here is my situation I am mining via BoincClient a grcpool.com I currently have 134 grc in my wallet I have an account in https://boincstats.com/ What shall I do to go solo? I have an email address in gridcoinresearch.com (I am using the same email as in boincstats.com) - but that is probably not enough. CPID still remains Investor Todo Links: https://gridcoin.science (good!) http://uscore.net/ https://steemit.com/gridcoin/@sc-steemit/solo-mining-a-guide-trough-magnitude-neural-network-and-beacons -> send a beatcoin https://steemit.com/gridcoin/@delordsquest/mining-cryptocurrencies-don-t-repeat-my-mistakes-gridcoin execute advertisebeacon check open project https://gridcoin.us/Guides/whitelist.htm <-- https://gridcoin.io/ Headless server apt install boinc boinccmd --join_acct_mgr https://www.grcpool.com fab1en uNaahzizibTHrDMaVyAP7DVYobrbXsNj boinccmd --get_state cd /var/lib/boinc-client https://www.youtube.com/watch?v=RrCsWqr6b1w","title":"BlockChain - GridCoin"},{"location":"blockchain-gridcoin.learn/#check-open-project","text":"https://gridcoin.us/Guides/whitelist.htm <-- https://gridcoin.io/","title":"check open project"},{"location":"blockchain-gridcoin.learn/#headless-server","text":"apt install boinc boinccmd --join_acct_mgr https://www.grcpool.com fab1en uNaahzizibTHrDMaVyAP7DVYobrbXsNj boinccmd --get_state cd /var/lib/boinc-client https://www.youtube.com/watch?v=RrCsWqr6b1w","title":"Headless server"},{"location":"blockchain-iot.learn/","text":"Can I run the blockchain if device is offline? It seems yes. IOTA is partition tolerant and a production-ready Tangle for true IoT will utilize NbPoW and Economic Clustering. Economic agents can be disconnected from the internet and also \"detach\" themselves from the main tangle (Cluster 0),","title":"BlockChain - IoT"},{"location":"blockchain-iot.learn/#can-i-run-the-blockchain-if-device-is-offline","text":"It seems yes. IOTA is partition tolerant and a production-ready Tangle for true IoT will utilize NbPoW and Economic Clustering. Economic agents can be disconnected from the internet and also \"detach\" themselves from the main tangle (Cluster 0),","title":"Can I run the blockchain if device is offline?"},{"location":"blockchain-talos.learn/","text":"Comment cr\u00e9er un wallet sur Talos? you need to create a Free Telos Account first https://telosuk.io/how-to-create-a-free-telos-account/ This is the telgram group where to create a wallet https://web.telegram.org/#/im?p=@TeloscopeBot Start typing \"/\" to get suggestion... You can try \"/start\" to strat the registration process We need to generate a key, follow the link given on Telgram Wait a bit with telegram opened, the confirmation came after 2-3 minutes ACCOUNT_NAME: fabientinker OWNER_PUBLIC_KEY: EOS8Yqxm4vVhq9AttJzANQX84ujezMTEMTCmH547fFcqEqMqf4n2x ACTIVE_PUBLIC_KEY: EOS8Yqxm4vVhq9AttJzANQX84ujezMTEMTCmH547fFcqEqMqf4n2x https://monitor.telosfoundation.io/keys How can I fund myself Check here... There is a video that havn't watched yet. How to create a free Telos account and add funds to your account within a matter of minutes https://sqrlwallet.io Where can I find myself? h\u00e9 h\u00e9! https://telos.eosx.io/account/fabientinker Is Talos the right platform for my project (Sara project)? How do I publish a Smart Contract on Talos? What resources do you have to know more about it ? The website of the foundation https://www.telosfoundation.io Ouff... many tools there to explore... https://telosnetwork.io/tools/ Don't know what exactly it is... Tiger is used on EOS. Animal topics! https://www.cointiger.com/en-us/#/trade_pro?coin=tlos_usdt What is the price of the RAM /tlos_price The Teloscope Bot TLOS/EOS = 0.0261 TLOS/USD = $0.0895 Do you have some figures about Talos (TLOS) https://coinmarketcap.com/currencies/telos/ Currently at \\$0.096899 USD It can be checked by the Tegram bot Fabien /tlos_price The Teloscope Bot TLOS/EOS = 0.0261 TLOS/USD = \\$0.0895","title":"BlockChain - Talos"},{"location":"blockchain-talos.learn/#comment-creer-un-wallet-sur-talos","text":"you need to create a Free Telos Account first https://telosuk.io/how-to-create-a-free-telos-account/ This is the telgram group where to create a wallet https://web.telegram.org/#/im?p=@TeloscopeBot Start typing \"/\" to get suggestion... You can try \"/start\" to strat the registration process We need to generate a key, follow the link given on Telgram Wait a bit with telegram opened, the confirmation came after 2-3 minutes ACCOUNT_NAME: fabientinker OWNER_PUBLIC_KEY: EOS8Yqxm4vVhq9AttJzANQX84ujezMTEMTCmH547fFcqEqMqf4n2x ACTIVE_PUBLIC_KEY: EOS8Yqxm4vVhq9AttJzANQX84ujezMTEMTCmH547fFcqEqMqf4n2x https://monitor.telosfoundation.io/keys","title":"Comment cr\u00e9er un wallet sur Talos?"},{"location":"blockchain-talos.learn/#how-can-i-fund-myself","text":"Check here... There is a video that havn't watched yet. How to create a free Telos account and add funds to your account within a matter of minutes https://sqrlwallet.io","title":"How can I fund myself"},{"location":"blockchain-talos.learn/#where-can-i-find-myself","text":"h\u00e9 h\u00e9! https://telos.eosx.io/account/fabientinker","title":"Where can I find myself?"},{"location":"blockchain-talos.learn/#is-talos-the-right-platform-for-my-project-sara-project","text":"","title":"Is Talos the right platform for my project (Sara project)?"},{"location":"blockchain-talos.learn/#how-do-i-publish-a-smart-contract-on-talos","text":"","title":"How do I publish a Smart Contract on Talos?"},{"location":"blockchain-talos.learn/#what-resources-do-you-have-to-know-more-about-it","text":"The website of the foundation https://www.telosfoundation.io Ouff... many tools there to explore... https://telosnetwork.io/tools/ Don't know what exactly it is... Tiger is used on EOS. Animal topics! https://www.cointiger.com/en-us/#/trade_pro?coin=tlos_usdt","title":"What resources do you have to know more about it ?"},{"location":"blockchain-talos.learn/#what-is-the-price-of-the-ram","text":"/tlos_price The Teloscope Bot TLOS/EOS = 0.0261 TLOS/USD = $0.0895","title":"What is the price of the RAM"},{"location":"blockchain-talos.learn/#do-you-have-some-figures-about-talos-tlos","text":"https://coinmarketcap.com/currencies/telos/ Currently at \\$0.096899 USD It can be checked by the Tegram bot Fabien /tlos_price The Teloscope Bot TLOS/EOS = 0.0261 TLOS/USD = \\$0.0895","title":"Do you have some figures about Talos (TLOS)"},{"location":"firewall-iptables.learn/","text":"Commands IPTABLES service iptables status service iptables stop service iptables start Example rule Allow outgoing www iptables -A OUTPUT -p tcp --sport 513:65535 --dport 80 -j ACCEPT iptables -A INPUT -p tcp --sport 80 --dport 513:65535 -j ACCEPT LIST RULES iptables -L STOP FIREWALL iptables -P INPUT ACCEPT; iptables -F ENABLE RULE iptables -A INPUT -i eth0 -p tcp --dport 20:22 -j ACCEPT; iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT ENABLE DNS (OTHERWISE SLOW DOWN SSH LOGIN) iptables -A INPUT -p udp -s \\$ISP_DNS_IP/32 --source-port 53 -d 0/0 -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT -> (A TESTER) iptables -A INPUT -p udp --sport 53 -j ACCEPT -> (A TESTER) ACCEPT PING iptables -A INPUT -i eth0 -p icmp -j ACCEPT SAVE IPTABLES sudo sh -c \"iptables-save > /etc/iptables.rules\" iptables-save > /etc/iptables.rules RESTORE IPTABLES SET UP echo '#!/bin/sh' > /etc/network/if-pre-up.d/iptables-load echo \"iptables-restore < /etc/iptables.rules\" >> /etc/network/if-pre-up.d/iptables-load chmod +x /etc/network/if-pre-up.d/iptables-load hint: to set up an automatic save \"if-post-down\" https://help.ubuntu.com/community/IptablesHowTo EXAMPLE CONFIG WITH MULTIPORT iptables -P INPUT ACCEPT; iptables -F iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -m multiport -p tcp --dport www,ssh,sftp,https -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT iptables -A INPUT -i eth0 -p icmp -j ACCEPT iptables -A INPUT -j LOG -m limit iptables -A INPUT -j REJECT iptables -L","title":"Firewall - iptables"},{"location":"firewall-iptables.learn/#commands-iptables","text":"service iptables status service iptables stop service iptables start","title":"Commands IPTABLES"},{"location":"firewall-iptables.learn/#example-rule","text":"","title":"Example rule"},{"location":"firewall-iptables.learn/#allow-outgoing-www","text":"iptables -A OUTPUT -p tcp --sport 513:65535 --dport 80 -j ACCEPT iptables -A INPUT -p tcp --sport 80 --dport 513:65535 -j ACCEPT","title":"Allow outgoing www"},{"location":"firewall-iptables.learn/#list-rules","text":"iptables -L","title":"LIST RULES"},{"location":"firewall-iptables.learn/#stop-firewall","text":"iptables -P INPUT ACCEPT; iptables -F","title":"STOP FIREWALL"},{"location":"firewall-iptables.learn/#enable-rule","text":"iptables -A INPUT -i eth0 -p tcp --dport 20:22 -j ACCEPT; iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT","title":"ENABLE RULE"},{"location":"firewall-iptables.learn/#enable-dns-otherwise-slow-down-ssh-login","text":"iptables -A INPUT -p udp -s \\$ISP_DNS_IP/32 --source-port 53 -d 0/0 -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT -> (A TESTER) iptables -A INPUT -p udp --sport 53 -j ACCEPT -> (A TESTER)","title":"ENABLE DNS (OTHERWISE SLOW DOWN SSH LOGIN)"},{"location":"firewall-iptables.learn/#accept-ping","text":"iptables -A INPUT -i eth0 -p icmp -j ACCEPT","title":"ACCEPT PING"},{"location":"firewall-iptables.learn/#save-iptables","text":"sudo sh -c \"iptables-save > /etc/iptables.rules\" iptables-save > /etc/iptables.rules","title":"SAVE IPTABLES"},{"location":"firewall-iptables.learn/#restore-iptables-set-up","text":"echo '#!/bin/sh' > /etc/network/if-pre-up.d/iptables-load echo \"iptables-restore < /etc/iptables.rules\" >> /etc/network/if-pre-up.d/iptables-load chmod +x /etc/network/if-pre-up.d/iptables-load hint: to set up an automatic save \"if-post-down\" https://help.ubuntu.com/community/IptablesHowTo","title":"RESTORE IPTABLES SET UP"},{"location":"firewall-iptables.learn/#example-config-with-multiport","text":"iptables -P INPUT ACCEPT; iptables -F iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -m multiport -p tcp --dport www,ssh,sftp,https -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT iptables -A INPUT -i eth0 -p icmp -j ACCEPT iptables -A INPUT -j LOG -m limit iptables -A INPUT -j REJECT iptables -L","title":"EXAMPLE CONFIG WITH MULTIPORT"},{"location":"firewall-ufw.learn/","text":"What are the basic steps to protect a server? Here are few commands with ufw (Uncomplicated Firewall) # Configure services ufw app list ufw allow OpenSSH # Enable UFW ufw enable ufw status # Disable UFW ufw disable Source: https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04#step-4-\u2014-setting-up-a-basic-firewall LuLu : un firewall sortant open-source https://www.macg.co/logiciels/2018/03/lulu-un-firewall-sortant-open-source-101813 Save firewall rules iptables-save > /tmp/firewall-rules.txt iptables-restore < /tmp/firewall-rules.txt Difference BSD vs Linux ipfw -> firewall BSD iptables -> firewall Linux Commands IPTABLES service iptables status service iptables stop service iptables start IPFW # pour voir les connection netstat # connexion ouverte netstat -r -> netstat -r -n # table de routage lsof | grep httpd -> fichier ouvert Wath is the difference between IPtables and UFW? Uncomplicated Firewall (ufw & gufw) is a firewall that is designed to be easy to use. It uses a command line interface consisting of a small number of simple commands, and uses iptables. iptables is already a very powerful tool by itself, but it\u2019s syntax can get awkward at times and hard to figure out, so Ubuntu developers decided to make ufw (\u201cThe reason ufw was developed is that we wanted to create a server-level firewall utility that was a little bit more for human beings .\u201d), which was to be simpler. Source: http://debianhelp.wordpress.com/2011/09/12/to-do-list-after-installing-ubuntu-11-10-aka-oneiric-ocelot/ MacOS Soft Radio Silence can stop any app from making network connections https://radiosilenceapp.com/ Haka pour le traitement de flux r\u00e9seau Firewall applicatif: http://linuxfr.org/news/haka-pour-le-traitement-de-flux-reseau http://www.bortzmeyer.org/haka.html filtrage, s\u00e9curit\u00e9, paquets, protocoles, etc... Example rule Allow outgoing www iptables -A OUTPUT -p tcp --sport 513:65535 --dport 80 -j ACCEPT iptables -A INPUT -p tcp --sport 80 --dport 513:65535 -j ACCEPT LIST RULES iptables -L STOP FIREWALL iptables -P INPUT ACCEPT; iptables -F ENABLE RULE iptables -A INPUT -i eth0 -p tcp --dport 20:22 -j ACCEPT; iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT ENABLE DNS (OTHERWISE SLOW DOWN SSH LOGIN) iptables -A INPUT -p udp -s \\$ISP_DNS_IP/32 --source-port 53 -d 0/0 -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT -> (A TESTER) iptables -A INPUT -p udp --sport 53 -j ACCEPT -> (A TESTER) ACCEPT PING iptables -A INPUT -i eth0 -p icmp -j ACCEPT SAVE IPTABLES sudo sh -c \"iptables-save > /etc/iptables.rules\" iptables-save > /etc/iptables.rules RESTORE IPTABLES SET UP echo '#!/bin/sh' > /etc/network/if-pre-up.d/iptables-load echo \"iptables-restore < /etc/iptables.rules\" >> /etc/network/if-pre-up.d/iptables-load chmod +x /etc/network/if-pre-up.d/iptables-load hint: to set up an automatic save \"if-post-down\" https://help.ubuntu.com/community/IptablesHowTo EXAMPLE CONFIG WITH MULTIPORT iptables -P INPUT ACCEPT; iptables -F iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -m multiport -p tcp --dport www,ssh,sftp,https -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT iptables -A INPUT -i eth0 -p icmp -j ACCEPT iptables -A INPUT -j LOG -m limit iptables -A INPUT -j REJECT iptables -L","title":"Firewall - UFW"},{"location":"firewall-ufw.learn/#what-are-the-basic-steps-to-protect-a-server","text":"Here are few commands with ufw (Uncomplicated Firewall) # Configure services ufw app list ufw allow OpenSSH # Enable UFW ufw enable ufw status # Disable UFW ufw disable Source: https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04#step-4-\u2014-setting-up-a-basic-firewall","title":"What are the basic steps to protect a server?"},{"location":"firewall-ufw.learn/#lulu-un-firewall-sortant-open-source","text":"https://www.macg.co/logiciels/2018/03/lulu-un-firewall-sortant-open-source-101813","title":"LuLu : un firewall sortant open-source"},{"location":"firewall-ufw.learn/#save-firewall-rules","text":"iptables-save > /tmp/firewall-rules.txt iptables-restore < /tmp/firewall-rules.txt","title":"Save firewall rules"},{"location":"firewall-ufw.learn/#difference-bsd-vs-linux","text":"ipfw -> firewall BSD iptables -> firewall Linux","title":"Difference BSD vs Linux"},{"location":"firewall-ufw.learn/#commands-iptables","text":"service iptables status service iptables stop service iptables start","title":"Commands IPTABLES"},{"location":"firewall-ufw.learn/#ipfw","text":"# pour voir les connection netstat # connexion ouverte netstat -r -> netstat -r -n # table de routage lsof | grep httpd -> fichier ouvert","title":"IPFW"},{"location":"firewall-ufw.learn/#wath-is-the-difference-between-iptables-and-ufw","text":"Uncomplicated Firewall (ufw & gufw) is a firewall that is designed to be easy to use. It uses a command line interface consisting of a small number of simple commands, and uses iptables. iptables is already a very powerful tool by itself, but it\u2019s syntax can get awkward at times and hard to figure out, so Ubuntu developers decided to make ufw (\u201cThe reason ufw was developed is that we wanted to create a server-level firewall utility that was a little bit more for human beings .\u201d), which was to be simpler. Source: http://debianhelp.wordpress.com/2011/09/12/to-do-list-after-installing-ubuntu-11-10-aka-oneiric-ocelot/","title":"Wath is the difference between IPtables and UFW?"},{"location":"firewall-ufw.learn/#macos-soft","text":"Radio Silence can stop any app from making network connections https://radiosilenceapp.com/","title":"MacOS Soft"},{"location":"firewall-ufw.learn/#haka-pour-le-traitement-de-flux-reseau","text":"Firewall applicatif: http://linuxfr.org/news/haka-pour-le-traitement-de-flux-reseau http://www.bortzmeyer.org/haka.html filtrage, s\u00e9curit\u00e9, paquets, protocoles, etc...","title":"Haka pour le traitement de flux r\u00e9seau"},{"location":"firewall-ufw.learn/#example-rule","text":"","title":"Example rule"},{"location":"firewall-ufw.learn/#allow-outgoing-www","text":"iptables -A OUTPUT -p tcp --sport 513:65535 --dport 80 -j ACCEPT iptables -A INPUT -p tcp --sport 80 --dport 513:65535 -j ACCEPT","title":"Allow outgoing www"},{"location":"firewall-ufw.learn/#list-rules","text":"iptables -L","title":"LIST RULES"},{"location":"firewall-ufw.learn/#stop-firewall","text":"iptables -P INPUT ACCEPT; iptables -F","title":"STOP FIREWALL"},{"location":"firewall-ufw.learn/#enable-rule","text":"iptables -A INPUT -i eth0 -p tcp --dport 20:22 -j ACCEPT; iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT","title":"ENABLE RULE"},{"location":"firewall-ufw.learn/#enable-dns-otherwise-slow-down-ssh-login","text":"iptables -A INPUT -p udp -s \\$ISP_DNS_IP/32 --source-port 53 -d 0/0 -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT -> (A TESTER) iptables -A INPUT -p udp --sport 53 -j ACCEPT -> (A TESTER)","title":"ENABLE DNS (OTHERWISE SLOW DOWN SSH LOGIN)"},{"location":"firewall-ufw.learn/#accept-ping","text":"iptables -A INPUT -i eth0 -p icmp -j ACCEPT","title":"ACCEPT PING"},{"location":"firewall-ufw.learn/#save-iptables","text":"sudo sh -c \"iptables-save > /etc/iptables.rules\" iptables-save > /etc/iptables.rules","title":"SAVE IPTABLES"},{"location":"firewall-ufw.learn/#restore-iptables-set-up","text":"echo '#!/bin/sh' > /etc/network/if-pre-up.d/iptables-load echo \"iptables-restore < /etc/iptables.rules\" >> /etc/network/if-pre-up.d/iptables-load chmod +x /etc/network/if-pre-up.d/iptables-load hint: to set up an automatic save \"if-post-down\" https://help.ubuntu.com/community/IptablesHowTo","title":"RESTORE IPTABLES SET UP"},{"location":"firewall-ufw.learn/#example-config-with-multiport","text":"iptables -P INPUT ACCEPT; iptables -F iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -m multiport -p tcp --dport www,ssh,sftp,https -j ACCEPT iptables -A INPUT -p udp -s 0/0 --sport 53 -j ACCEPT iptables -A INPUT -i eth0 -p icmp -j ACCEPT iptables -A INPUT -j LOG -m limit iptables -A INPUT -j REJECT iptables -L","title":"EXAMPLE CONFIG WITH MULTIPORT"},{"location":"kubernetes.learn/","text":"Testing new tools and taking notes of my success / failures... My Next questions? How to install Helm? Attention! It looks we must enable helm service in microk8s.helm How to configure my domain with Ingress? To be further tested. We have ingress.yaml file to be continued... Continue reading: https://hackernoon.com/expose-your-kubernetes-service-from-your-own-custom-domains-cc8a1d965f How to add an ssl certificate with Ingress https://docs.bitnami.com/kubernetes/how-to/secure-kubernetes-services-with-ingress-tls-letsencrypt/ https://kubernetes.github.io/ingress-nginx/user-guide/tls/ Is Kubernetes the right tool? I am still experimenting and haven't decided yet if the overhead is worth the benefit. I am experimenting with MicroK8s which looks promising in term of simplicity. Ideally I would like to also have it running on my local machine. While testing I am aiming to set up the following basic features: Setup a frontend http server to serve / proxy my applications. Ingress controller! SSL certificate managed by Let's Encrypt . The installation process is quick and straightforward. I am following this tutorial the online tutorial provided by Ubuntu. It is well done and user-friendly to follow. How do I install heml and microk8s? snap install microk8s --classic snap install helm --classic Pay attention a few ufw must be enabled. Can you show me basic and daily commands? Useful commands from the microk8s tutorial: # Create an alias to kubectl. Useful for my case since I am running solely mircok8s snap alias microk8s.kubectl kubectl # List a bunch of enabled / disabled services microk8s.status # Enable a few addons: dashboard + dns microk8s.enable dns microk8s.enable dashboard # Big overview of the system # We can see IP address kubectl get all --all-namespaces # For now we only have private IP address. # If we want to access the dashboard we need to open a ssh tunnel # REPLACE IP 10.152.183 by the one displayed by the command above ssh pco2new -L 1443:10.152.183.1:443 -L 16443:127.0.0.1:16443 # Show URLs kubectl cluster-info # To display the username / password kubectl config view microk8s.config (alternative) # Open the browser with tunnel enabled https://127.0.0.1:16443 (API - Kubernetes master is running) https://127.0.0.1:16443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy CoreDNS is running at # Credentials that will be asked when loading the IP:443 token=$(microk8s.kubectl -n kube-system get secret | grep default-token | cut -d \" \" -f1) microk8s.kubectl -n kube-system describe secret $token How to deploy a service \"microbot\" example? We want do deploy a kind of \"hello world\" service # Create the application kubectl create deployment microbot --image=dontrebootme/microbot:v1 kubectl scale deployment microbot --replicas=2 kubectl expose deployment microbot --type=NodePort --port=80 --name=microbot-service # Check on which IP / port the pod was started microk8s.kubectl get all --all-namespaces # Useful commands kubectl get namespaces kubectl get all kubectl get all --all-namespaces kubectl get nodes # should be 1 with microk8s kubectl get pods kubectl get pods --output=wide kubectl get deployments kubectl describe deployments microbot kubectl get replicasets kubectl describe replicasets kubectl get services kubectl describe service microbot-services How to deploy a service \"hello-world\" example? kubectl run hello-world --replicas=5 --labels=\"run=load-balancer-example\" --image=gcr.io/google-samples/node-hello:1.0 --port=8080 # or kubectl apply -f https://k8s.io/examples/service/load-balancer-example.yaml Rest of the tutorial: https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/ How do I expose a service? Exposing means accessible from the \"outside\". There are various ways actually. One would be the LoadBalancer . Notice however this will not work with Microk8s since it is not a Kubkernetes Cloud provider. You will end up with a \"external IP pending\" error. kubectl expose deployment hello-world --type=LoadBalancer --name=my-service kubectl get services Why do I get a external IP \"pending\" ? In this case, there is no LoadBalancer integrated (unlike AWS or Google Cloud). With this default setup, you can only use NodePort or an Ingress Controller. Source: https://stackoverflow.com/questions/44110876/kubernetes-service-external-ip-pending How do I enable Ingress on MicroK8s? Pay attention the URL to install and download Ingress via mandatory.yaml has changed from the tutorial. Read the doc here! Kubernetes chaos moving target it seems... https://github.com/nginxinc/kubernetes-ingress/blob/master/docs/installation.md kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/mandatory.yaml # We could also install it via it seems helm install stable/nginx-ingress # Special command for microsk8s microk8s.enable ingress Source: https://kndrck.co/posts/microk8s_ingress_example/ https://matthewpalmer.net/kubernetes-app-developer/articles/kubernetes-ingress-guide-nginx-example.html How to uninstall / remove kubectl delete namespace ingress-nginx There could be more steps if Prometheus is involved. Where do I find my configuration file? When using Microk8s nano /var/snap/microk8s/current/args/kube-apiserver How can I delete an application? kubectl delete services my-service kubectl delete deployment hello-world What are service types? ClusterIP : Exposes the Service on a cluster-internal IP. Choosing this value makes the Service only reachable from within the cluster. This is the default ServiceType . NodePort : Exposes the Service on each Node\u2019s IP at a static port (the NodePort ). A ClusterIP Service, to which the NodePort Service routes, is automatically created. You\u2019ll be able to contact the NodePort Service, from outside the cluster, by requesting : . LoadBalancer : Exposes the Service externally using a cloud provider\u2019s load balancer. NodePort and ClusterIP Services, to which the external load balancer routes, are automatically created. Source: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types","title":"Kubernetes - MicroK8s"},{"location":"kubernetes.learn/#my-next-questions","text":"How to install Helm? Attention! It looks we must enable helm service in microk8s.helm How to configure my domain with Ingress? To be further tested. We have ingress.yaml file to be continued... Continue reading: https://hackernoon.com/expose-your-kubernetes-service-from-your-own-custom-domains-cc8a1d965f How to add an ssl certificate with Ingress https://docs.bitnami.com/kubernetes/how-to/secure-kubernetes-services-with-ingress-tls-letsencrypt/ https://kubernetes.github.io/ingress-nginx/user-guide/tls/","title":"My Next questions?"},{"location":"kubernetes.learn/#is-kubernetes-the-right-tool","text":"I am still experimenting and haven't decided yet if the overhead is worth the benefit. I am experimenting with MicroK8s which looks promising in term of simplicity. Ideally I would like to also have it running on my local machine. While testing I am aiming to set up the following basic features: Setup a frontend http server to serve / proxy my applications. Ingress controller! SSL certificate managed by Let's Encrypt . The installation process is quick and straightforward. I am following this tutorial the online tutorial provided by Ubuntu. It is well done and user-friendly to follow.","title":"Is Kubernetes the right tool?"},{"location":"kubernetes.learn/#how-do-i-install-heml-and-microk8s","text":"snap install microk8s --classic snap install helm --classic Pay attention a few ufw must be enabled.","title":"How do I install heml and microk8s?"},{"location":"kubernetes.learn/#can-you-show-me-basic-and-daily-commands","text":"Useful commands from the microk8s tutorial: # Create an alias to kubectl. Useful for my case since I am running solely mircok8s snap alias microk8s.kubectl kubectl # List a bunch of enabled / disabled services microk8s.status # Enable a few addons: dashboard + dns microk8s.enable dns microk8s.enable dashboard # Big overview of the system # We can see IP address kubectl get all --all-namespaces # For now we only have private IP address. # If we want to access the dashboard we need to open a ssh tunnel # REPLACE IP 10.152.183 by the one displayed by the command above ssh pco2new -L 1443:10.152.183.1:443 -L 16443:127.0.0.1:16443 # Show URLs kubectl cluster-info # To display the username / password kubectl config view microk8s.config (alternative) # Open the browser with tunnel enabled https://127.0.0.1:16443 (API - Kubernetes master is running) https://127.0.0.1:16443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy CoreDNS is running at # Credentials that will be asked when loading the IP:443 token=$(microk8s.kubectl -n kube-system get secret | grep default-token | cut -d \" \" -f1) microk8s.kubectl -n kube-system describe secret $token","title":"Can you show me basic and daily commands?"},{"location":"kubernetes.learn/#how-to-deploy-a-service-microbot-example","text":"We want do deploy a kind of \"hello world\" service # Create the application kubectl create deployment microbot --image=dontrebootme/microbot:v1 kubectl scale deployment microbot --replicas=2 kubectl expose deployment microbot --type=NodePort --port=80 --name=microbot-service # Check on which IP / port the pod was started microk8s.kubectl get all --all-namespaces # Useful commands kubectl get namespaces kubectl get all kubectl get all --all-namespaces kubectl get nodes # should be 1 with microk8s kubectl get pods kubectl get pods --output=wide kubectl get deployments kubectl describe deployments microbot kubectl get replicasets kubectl describe replicasets kubectl get services kubectl describe service microbot-services","title":"How to deploy a service \"microbot\" example?"},{"location":"kubernetes.learn/#how-to-deploy-a-service-hello-world-example","text":"kubectl run hello-world --replicas=5 --labels=\"run=load-balancer-example\" --image=gcr.io/google-samples/node-hello:1.0 --port=8080 # or kubectl apply -f https://k8s.io/examples/service/load-balancer-example.yaml Rest of the tutorial: https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/","title":"How to deploy a service \"hello-world\" example?"},{"location":"kubernetes.learn/#how-do-i-expose-a-service","text":"Exposing means accessible from the \"outside\". There are various ways actually. One would be the LoadBalancer . Notice however this will not work with Microk8s since it is not a Kubkernetes Cloud provider. You will end up with a \"external IP pending\" error. kubectl expose deployment hello-world --type=LoadBalancer --name=my-service kubectl get services","title":"How do I expose a service?"},{"location":"kubernetes.learn/#why-do-i-get-a-external-ip-pending","text":"In this case, there is no LoadBalancer integrated (unlike AWS or Google Cloud). With this default setup, you can only use NodePort or an Ingress Controller. Source: https://stackoverflow.com/questions/44110876/kubernetes-service-external-ip-pending","title":"Why do I get a external IP \"pending\" ?"},{"location":"kubernetes.learn/#how-do-i-enable-ingress-on-microk8s","text":"Pay attention the URL to install and download Ingress via mandatory.yaml has changed from the tutorial. Read the doc here! Kubernetes chaos moving target it seems... https://github.com/nginxinc/kubernetes-ingress/blob/master/docs/installation.md kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/mandatory.yaml # We could also install it via it seems helm install stable/nginx-ingress # Special command for microsk8s microk8s.enable ingress Source: https://kndrck.co/posts/microk8s_ingress_example/ https://matthewpalmer.net/kubernetes-app-developer/articles/kubernetes-ingress-guide-nginx-example.html","title":"How do I enable Ingress on MicroK8s?"},{"location":"kubernetes.learn/#how-to-uninstall-remove","text":"kubectl delete namespace ingress-nginx There could be more steps if Prometheus is involved.","title":"How to uninstall / remove"},{"location":"kubernetes.learn/#where-do-i-find-my-configuration-file","text":"When using Microk8s nano /var/snap/microk8s/current/args/kube-apiserver","title":"Where do I find my configuration file?"},{"location":"kubernetes.learn/#how-can-i-delete-an-application","text":"kubectl delete services my-service kubectl delete deployment hello-world","title":"How can I delete an application?"},{"location":"kubernetes.learn/#what-are-service-types","text":"ClusterIP : Exposes the Service on a cluster-internal IP. Choosing this value makes the Service only reachable from within the cluster. This is the default ServiceType . NodePort : Exposes the Service on each Node\u2019s IP at a static port (the NodePort ). A ClusterIP Service, to which the NodePort Service routes, is automatically created. You\u2019ll be able to contact the NodePort Service, from outside the cluster, by requesting : . LoadBalancer : Exposes the Service externally using a cloud provider\u2019s load balancer. NodePort and ClusterIP Services, to which the external load balancer routes, are automatically created. Source: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types","title":"What are service types?"},{"location":"machine-learning.learn/","text":"Machine Learning University d\u2019AWS est disponible gratuitement https://www.silicon.fr/machine-learning-university-daws-est-disponible-gratuitement-226459.html NLP Natural Language Processing https://www.freecodecamp.org/news/beaucarnes/natural-language-processing-tutorial-with-python-nltk--9z5vFDwr4 Computer Science + Artificial Intelligence + Human Language","title":"Machine-learning"},{"location":"machine-learning.learn/#machine-learning-university-daws-est-disponible-gratuitement","text":"https://www.silicon.fr/machine-learning-university-daws-est-disponible-gratuitement-226459.html","title":"Machine Learning University d\u2019AWS est disponible gratuitement"},{"location":"machine-learning.learn/#nlp","text":"Natural Language Processing https://www.freecodecamp.org/news/beaucarnes/natural-language-processing-tutorial-with-python-nltk--9z5vFDwr4 Computer Science + Artificial Intelligence + Human Language","title":"NLP"},{"location":"presentation-tools.learn/","text":"Presentation Tools Web Slides What are the presentation tools ? I like to write my presentation / slides in Markdown and transform them afterward in web slides / PDF. Although it does not produce the most beautiful presentation with sparkling effects and so on, It allows to just concentrate on the content. For quite some time I was using cleaver which is a nice and straightforward tool. The downside is that it can not generate PDF which is required in the academic world as \"proove of work\". That's because I recently move to Marp that looks quite ambitious: Markdown Presentation Ecosystem. I am still experimenting a bit with this tool but it looks quite complete. Marp The integration with VS code is bluffing ! --- marp: true --- # Your slide deck Start writing! As said above, very nice tool. It can me installed globally npm install -g @marp-team/marp-cli Or locally via npx . From the documentation: # Convert slide deck into HTML npx @marp-team/marp-cli slide-deck.md npx @marp-team/marp-cli slide-deck.md -o output.html # Convert slide deck into PDF npx @marp-team/marp-cli slide-deck.md --pdf npx @marp-team/marp-cli slide-deck.md -o output.pdf # Convert slide deck into PowerPoint document (PPTX) npx @marp-team/marp-cli slide-deck.md --pptx npx @marp-team/marp-cli slide-deck.md -o output.pptx # Watch mode npx @marp-team/marp-cli -w slide-deck.md # Server mode (Pass directory to serve) npx @marp-team/marp-cli -s ./slides # Open converted HTML in preview window npx @marp-team/marp-cli -p slide-deck.md Marp: Markdown Presentation Ecosystem https://github.com/marp-team/marp-cli mkdocs Another option, I am keeping on the radard is https://www.mkdocs.org with the material design theme . The theme is fully responsive and displays a table of content on the right. This is a python tools which must be installed via pip. On my system (Ubuntu 18.04 as of writing) I had to run # I guess with Ubuntu 20.04 it can be python-pip since python 3 will be the default sudo apt python3-pip # Install mkdocs via pip which is more up-to-date. pip install mkdocs # Install material design theme pip install mkdocs-material Bootstrap a new project mkdocs new my-mkdocs mkdocs serve # Check the command usage Commands: build Build the MkDocs documentation gh-deploy Deploy your documentation to GitHub Pages new Create a new MkDocs project serve Run the builtin development server","title":"Presentation Tools Web Slides"},{"location":"presentation-tools.learn/#presentation-tools-web-slides","text":"","title":"Presentation Tools Web Slides"},{"location":"presentation-tools.learn/#what-are-the-presentation-tools","text":"I like to write my presentation / slides in Markdown and transform them afterward in web slides / PDF. Although it does not produce the most beautiful presentation with sparkling effects and so on, It allows to just concentrate on the content. For quite some time I was using cleaver which is a nice and straightforward tool. The downside is that it can not generate PDF which is required in the academic world as \"proove of work\". That's because I recently move to Marp that looks quite ambitious: Markdown Presentation Ecosystem. I am still experimenting a bit with this tool but it looks quite complete.","title":"What are the presentation tools ?"},{"location":"presentation-tools.learn/#marp","text":"The integration with VS code is bluffing ! --- marp: true --- # Your slide deck Start writing! As said above, very nice tool. It can me installed globally npm install -g @marp-team/marp-cli Or locally via npx . From the documentation: # Convert slide deck into HTML npx @marp-team/marp-cli slide-deck.md npx @marp-team/marp-cli slide-deck.md -o output.html # Convert slide deck into PDF npx @marp-team/marp-cli slide-deck.md --pdf npx @marp-team/marp-cli slide-deck.md -o output.pdf # Convert slide deck into PowerPoint document (PPTX) npx @marp-team/marp-cli slide-deck.md --pptx npx @marp-team/marp-cli slide-deck.md -o output.pptx # Watch mode npx @marp-team/marp-cli -w slide-deck.md # Server mode (Pass directory to serve) npx @marp-team/marp-cli -s ./slides # Open converted HTML in preview window npx @marp-team/marp-cli -p slide-deck.md Marp: Markdown Presentation Ecosystem https://github.com/marp-team/marp-cli","title":"Marp"},{"location":"presentation-tools.learn/#mkdocs","text":"Another option, I am keeping on the radard is https://www.mkdocs.org with the material design theme . The theme is fully responsive and displays a table of content on the right. This is a python tools which must be installed via pip. On my system (Ubuntu 18.04 as of writing) I had to run # I guess with Ubuntu 20.04 it can be python-pip since python 3 will be the default sudo apt python3-pip # Install mkdocs via pip which is more up-to-date. pip install mkdocs # Install material design theme pip install mkdocs-material Bootstrap a new project mkdocs new my-mkdocs mkdocs serve # Check the command usage Commands: build Build the MkDocs documentation gh-deploy Deploy your documentation to GitHub Pages new Create a new MkDocs project serve Run the builtin development server","title":"mkdocs"},{"location":"python.learn/","text":"How to select the right python version on Ubuntu 18.04? sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 1 sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2 sudo update-alternatives --config python Use the following command to set python 3.6 as default: sudo update-alternatives --set python /usr/bin/python3.6 How to get started with Google Colab https://towardsdatascience.com/getting-started-with-google-colab-f2fff97f594c python import os os.listdir('.') for c in 'abc': print c ipython ipython notebook x = ! ls x[:3] x = ! ssh root@asdf.com ls x = ! ssh root@asdf.com cat /bin/lastsizes.txt How to install Pyenv and Anaconda? http://geek.oops.jp/2016/01/10/how-to-install-pyenv/ https://help.dreamhost.com/hc/en-us/articles/216137637-Pyenv-simple-Python-version-management # Load pyenv automatically by appending # the following to ~/.config/fish/config.fish: status --is-interactive; and source (pyenv init -|psub) # List all possible version pyenv install --list What are so called coroutine in Python? Coroutines are similar to generators with a few differences. The main differences are: \u2022 generators are data producers \u2022 coroutines are data consumers Source: http://book.pythontips.com/en/latest/coroutines.html","title":"Python"},{"location":"python.learn/#how-to-select-the-right-python-version-on-ubuntu-1804","text":"sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 1 sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2 sudo update-alternatives --config python Use the following command to set python 3.6 as default: sudo update-alternatives --set python /usr/bin/python3.6","title":"How to select the right python version on Ubuntu 18.04?"},{"location":"python.learn/#how-to-get-started-with-google-colab","text":"https://towardsdatascience.com/getting-started-with-google-colab-f2fff97f594c python import os os.listdir('.') for c in 'abc': print c ipython ipython notebook x = ! ls x[:3] x = ! ssh root@asdf.com ls x = ! ssh root@asdf.com cat /bin/lastsizes.txt","title":"How to get started with Google\u00a0Colab"},{"location":"python.learn/#how-to-install-pyenv-and-anaconda","text":"http://geek.oops.jp/2016/01/10/how-to-install-pyenv/ https://help.dreamhost.com/hc/en-us/articles/216137637-Pyenv-simple-Python-version-management # Load pyenv automatically by appending # the following to ~/.config/fish/config.fish: status --is-interactive; and source (pyenv init -|psub) # List all possible version pyenv install --list","title":"How to install Pyenv and Anaconda?"},{"location":"python.learn/#what-are-so-called-coroutine-in-python","text":"Coroutines are similar to generators with a few differences. The main differences are: \u2022 generators are data producers \u2022 coroutines are data consumers Source: http://book.pythontips.com/en/latest/coroutines.html","title":"What are so called coroutine in Python?"},{"location":"sveltejs.learn/","text":"How to handle Graphql request in a Sapper application? We can find some good answer there. The article also covers how you can create subscription. I haven't tried the subscript part yet. The rest of the article is fine. I am not handling the server side code generation howerver. https://frustrated.blog/2019/07/18/sapper-graphql-subscriptions.html How do I handle the login with a Sapper application? Check the realworld example. How to deploy sapper application on Netlify? edit netlify.toml __sapper__/export How to import Svelte widget into existing project Just import the bundle.js file it seems. <script defer src=\"/bundle.js\"></script> How do I start a sveltjs project? npx degit sveltejs/template my-first-svelte-project What is sirv? An optimized middleware & CLI application for serving static files The core module, returning a middleware function for use in Polka & Express-like frameworks. We can see a file change here. https://github.com/sveltejs/template/commit/58a97ff774e9fc4ef0a561ae0a48e8dee122e965","title":"SvelteJS"},{"location":"sveltejs.learn/#how-to-handle-graphql-request-in-a-sapper-application","text":"We can find some good answer there. The article also covers how you can create subscription. I haven't tried the subscript part yet. The rest of the article is fine. I am not handling the server side code generation howerver. https://frustrated.blog/2019/07/18/sapper-graphql-subscriptions.html","title":"How to handle Graphql request in a Sapper application?"},{"location":"sveltejs.learn/#how-do-i-handle-the-login-with-a-sapper-application","text":"Check the realworld example.","title":"How do I handle the login with a Sapper application?"},{"location":"sveltejs.learn/#how-to-deploy-sapper-application-on-netlify","text":"edit netlify.toml __sapper__/export","title":"How to deploy sapper application on Netlify?"},{"location":"sveltejs.learn/#how-to-import-svelte-widget-into-existing-project","text":"Just import the bundle.js file it seems. <script defer src=\"/bundle.js\"></script>","title":"How to import Svelte widget into existing project"},{"location":"sveltejs.learn/#how-do-i-start-a-sveltjs-project","text":"npx degit sveltejs/template my-first-svelte-project","title":"How do I start a sveltjs project?"},{"location":"sveltejs.learn/#what-is-sirv","text":"An optimized middleware & CLI application for serving static files The core module, returning a middleware function for use in Polka & Express-like frameworks. We can see a file change here. https://github.com/sveltejs/template/commit/58a97ff774e9fc4ef0a561ae0a48e8dee122e965","title":"What is sirv?"},{"location":"t3-bootstrap-package.learn/","text":"Beta quality! Rework content Boostrap Package # TYPO3 v9 composer require bk2k/bootstrap-package composer require typo3/cms-introduction # TYPO3 v8 git clone https://github.com/TYPO3/TYPO3.CMS.BaseDistribution/tree/8.x (?) composer require bk2k/bootstrap-package ^8.0 composer require typo3/cms-introduction ^3.0 php vendor/bin/typo3cms install:setup \\ --non-interactive \\ --database-user-name=root \\ --database-user-password=root \\ --database-host-name=127.0.0.1 \\ --database-port=3306 \\ --database-name=ebelaurorech \\ --admin-user-name=admin \\ --admin-password=password \\ --site-setup-type=ebelaurore.ch set TYPO3_CONTEXT Development php -S localhost:8000 -t public","title":"Bootstrap-package-t3"},{"location":"t3-bootstrap-package.learn/#boostrap-package","text":"# TYPO3 v9 composer require bk2k/bootstrap-package composer require typo3/cms-introduction # TYPO3 v8 git clone https://github.com/TYPO3/TYPO3.CMS.BaseDistribution/tree/8.x (?) composer require bk2k/bootstrap-package ^8.0 composer require typo3/cms-introduction ^3.0 php vendor/bin/typo3cms install:setup \\ --non-interactive \\ --database-user-name=root \\ --database-user-password=root \\ --database-host-name=127.0.0.1 \\ --database-port=3306 \\ --database-name=ebelaurorech \\ --admin-user-name=admin \\ --admin-password=password \\ --site-setup-type=ebelaurore.ch set TYPO3_CONTEXT Development php -S localhost:8000 -t public","title":"Boostrap Package"},{"location":"t3-introduction.learn/","text":"Beta quality! Rework content Comment installer TYPO3 Clone du Core + ddev https://docs.typo3.org/m/typo3/guide-contributionworkflow/master/en-us/Appendix/SettingUpTypo3Ddev.html Incov\u00e9nient: \u00e0 tester si on ne peut pas faire un require de \"typo3/cms-introduction\" Depuis composer.typo3.org, ensuite: composer create-project typo3/cms-base-distribution CmsBaseDistribution ^9 Si n\u00e9cessaire r\u00e9cup\u00e9rer une composer d'une autre version https://github.com/TYPO3/TYPO3.CMS.BaseDistribution/ composer update si n\u00e9cessaire ajouter / copier un ddev existant cp -r ~/Work/Ecodev/graduatecampus/.ddev . composer require typo3/cms-introduction Depuis ce projet https://github.com/helhum/TYPO3-Distribution/ Inconv\u00e9nient: opiniated distribution Step to install the bootstrap package with frontend editing composer create-project typo3/cms-base-distribution CmsBaseDistribution cd CmsBaseDistribution mkdir logs touch web/FIRST_INSTALL sudo brew services restart nginx composer require friendsoftypo3/frontend-editing composer require bk2k/bootstrap-package composer require typo3/cms-introduction","title":"Introduction"},{"location":"t3-introduction.learn/#comment-installer-typo3","text":"Clone du Core + ddev https://docs.typo3.org/m/typo3/guide-contributionworkflow/master/en-us/Appendix/SettingUpTypo3Ddev.html Incov\u00e9nient: \u00e0 tester si on ne peut pas faire un require de \"typo3/cms-introduction\" Depuis composer.typo3.org, ensuite: composer create-project typo3/cms-base-distribution CmsBaseDistribution ^9 Si n\u00e9cessaire r\u00e9cup\u00e9rer une composer d'une autre version https://github.com/TYPO3/TYPO3.CMS.BaseDistribution/ composer update si n\u00e9cessaire ajouter / copier un ddev existant cp -r ~/Work/Ecodev/graduatecampus/.ddev . composer require typo3/cms-introduction Depuis ce projet https://github.com/helhum/TYPO3-Distribution/ Inconv\u00e9nient: opiniated distribution","title":"Comment installer TYPO3"},{"location":"t3-introduction.learn/#step-to-install-the-bootstrap-package-with-frontend-editing","text":"composer create-project typo3/cms-base-distribution CmsBaseDistribution cd CmsBaseDistribution mkdir logs touch web/FIRST_INSTALL sudo brew services restart nginx composer require friendsoftypo3/frontend-editing composer require bk2k/bootstrap-package composer require typo3/cms-introduction","title":"Step to install the bootstrap package with frontend editing"},{"location":"t3.learn/","text":"Beta quality! Rework content This is where I repick code snippet https://packagist.org/packages/bnf/typo3-middleware https://github.com/bnf/slim-typo3 Deprecation $pageRenderer->addCssFile( \\TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::extRelPath($this->extKey) . 'Resources/Public/Css/Backend.css' ); $pageRenderer->addCssFile( GeneralUtility::getFileAbsFileName('EXT:teldas_company_mgmt/Resources/Public/Css/Backend.css') ); IconRegistry /** @var \\TYPO3\\CMS\\Core\\Imaging\\IconFactory $iconFactory */ $iconFactory = GeneralUtility::makeInstance(IconFactory::class); $content[] = $iconFactory->getIcon('extensions-' . $this->extKey . '-user', Icon::SIZE_SMALL)->render(); TypeScript The patch for issue #87324 was based on outdated tslint configuration, which causes all TypeScript builds to fail. The build is now fixed by executing cd Build ./node_modules/tslint/bin/tslint -c tslint.json --fix --project . Functional tests Functional testing in TYPO3 world is basically the opposite of unit testing: Instead of looking at rather small, isolated pieces of code, functional testing looks at bigger scenarios with many involved dependencies. A typical scenario creates a full instance with some extensions, puts some rows into the database and calls an entry method, for instance a controller action. https://docs.typo3.org/typo3cms/CoreApiReference/Testing/WritingFunctional.html Example: Build/Scripts/runTests.sh -s functional -p 7.3 -d postgres typo3/sysext/core/Tests/Functional/Package/ Based on the Nimut framework feature test. Source of inspiration: https://github.com/cobwebch/external_import/blob/master/Tests/Functional/ImporterTest.php Acceptance tests https://docs.typo3.org/typo3cms/CoreApiReference/Testing/CoreTesting.html#introduction Build/Scripts/runTests.sh -s acceptance typo3/sysext/core/Tests/Acceptance/Backend/Topbar/ https://docs.typo3.org/typo3cms/CoreApiReference/Testing/WritingAcceptance.html Acceptance testing in TYPO3 world is about piloting a browser to click through a frontend generated by TYPO3 or clicking through scenarios in the backend. PHPUnit ./bin/phpunit -d memory_limit=1G -c vendor/typo3/testing-framework/Resources/Core/Build/UnitTests.xml TYPO3 ON DOCKER FOR MAC PERFORMANCE IMPROVEMENTS https://typo3worx.eu/2019/01/performance-improvements-typo3-docker-macos/ TYPO3 Version Chart http://typo3versions.felixnagel.com/ Rsync rsync -av cuso:/sites/cuso.ch/htdocs/fileadmin htdocs/ # Or with delete flag rsync -a --delete cuso:/sites/cuso.ch/htdocs/fileadmin htdocs/ API https://forge.typo3.org/issues/82839 Set debug $GLOBALS['TYPO3_CONF_VARS']['SYS']['sqlDebug'] = 1; $GLOBALS['TYPO3_CONF_VARS']['FE']['debug'] = 1; $GLOBALS['TYPO3_CONF_VARS']['BE']['debug'] = 1; $GLOBALS['TYPO3_CONF_VARS']['SYS']['displayErrors'] => '1', $GLOBALS['TYPO3_CONF_VARS']['SYS']['devIPmask'] => '*', $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandler'] => 'TYPO3\\\\CMS\\\\Core\\\\Error\\\\ErrorHandler', $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandlerErrors'] => E_ALL ^ E_NOTICE, $GLOBALS['TYPO3_CONF_VARS']['SYS']['exceptionalErrors'] => E_ALL ^ E_NOTICE ^ E_WARNING ^ E_USER_ERROR ^ E_USER_NOTICE ^ E_USER_WARNING, $GLOBALS['TYPO3_CONF_VARS']['SYS']['debugExceptionHandler'] => 'TYPO3\\\\CMS\\\\Core\\\\Error\\\\DebugExceptionHandler', $GLOBALS['TYPO3_CONF_VARS']['SYS']['productionExceptionHandler'] => 'TYPO3\\\\CMS\\\\Core\\\\Error\\\\DebugExceptionHandler', $GLOBALS['TYPO3_CONF_VARS']['SYS']['systemLogLevel'] => '0', $GLOBALS['TYPO3_CONF_VARS']['SYS']['systemLog'] => true, Copyright /* * This file is part of the Fab/. project. */ /* * This file is part of the Fab/. project under GPLv2 or later. * * For the full copyright and license information, please read the * LICENSE.md file that was distributed with this source code. */ Debug if ($_SERVER['REMOTE_ADDR'] === '195.141.130.142') { } 'SYS' => [ 'devIPmask' => '127.0.0.1,::1,194.38.181.219,212.41.199.98,105.235.188.211', ] ext_localconf.php <?php defined('TYPO3_MODE') || die('Access denied.'); call_user_func( function () { // Setting up scripts that can be run from the cli_dispatch.phpsh script. $GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['extbase']['commandControllers'][] = \\Cobweb\\GichdLitmos\\Command\\LitmosCommandController::class; } ); Create a new extension Boilerplate code to write a new extension @new-extension-- # ext_localconf.php: defined('TYPO3_MODE') || die('Access denied.'); call_user_func( function() { \\TYPO3\\CMS\\Extbase\\Utility\\ExtensionUtility::configurePlugin ( 'Vendor.MyExtension', 'ExamplePlugin', [ 'Document' => 'list, show' ], // non-cacheable actions [ 'Document' => 'list' ] ); } ); ext_tables.php Configuration/TCA/Overrides/tt_content.php defined('TYPO3_MODE') || die('Access denied.'); call_user_func( function() { // Load TypoScript for this extension \\TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::addStaticFile( 'my_extension', 'Configuration/TypoScript', 'GICHD Package : bla' ); \\TYPO3\\CMS\\Extbase\\Utility\\ExtensionUtility::registerPlugin ( 'Vendor.MyExtension', 'ExamplePlugin', 'My title', 'EXT:my_example/Resources/Public/Icons/Extension.svg' ); $GLOBALS['TCA']['tt_content']['types']['list']['subtypes_excludelist']['myextension_exampleplugin'] = 'layout,recursive,select_key,pages'; $GLOBALS['TCA']['tt_content']['types']['list']['subtypes_addlist']['myextension_exampleplugin'] = 'pi_flexform,recursive'; TYPO3\\CMS\\Core\\Utility\\GeneralUtility::addPiFlexFormValue('myextension_exampleplugin', 'FILE:EXT:my_example/Configuration/FlexForms/flexform_list.xml'); } ); In Classes/Controller/MyController.php <?php namespace Ecodev\\Speciality\\Controller; /* * This file is part of the Ecodev/Speciality project under GPLv2 or later. */ use TYPO3\\CMS\\Extbase\\Mvc\\Controller\\ActionController; /** * Class DocumentController */ class DocumentController extends ActionController { /** * */ public function listAction() { return '123'; } } In Resources/Private/Templates/Document/List.html <html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en\" xmlns:v=\"http://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers\" xmlns:f=\"http://typo3.org/ns/fluid/ViewHelpers\"> ciao bello! </html> In configuration/TypoScript/constants.typoscript plugin.tx_myexample { settings { # cat=plugin.tx_myexample/a; type=int+; label=Editor FE Usergroup uid:Enter the uid of the FE Usergroup that should be allowed to edit Blogs and Post in the frontend editorUsergroupUid = 1 } view { # cat=plugin.tx_myexample/file; type=string; label=Path to template root (FE) templateRootPath = EXT:my_example/Resources/Private/Templates/ # cat=plugin.tx_myexample/file; type=string; label=Path to template partials (FE) partialRootPath = EXT:my_example/Resources/Private/Partials/ # cat=plugin.tx_myexample/file; type=string; label=Path to template layouts (FE) layoutRootPath = EXT:my_example/Resources/Private/Layouts/ } persistence { # cat=plugin.tx_myexample//a; type=int+; label=Default storage PID storagePid = } } In Configuration/TypoScript/setup.typoscript # Plugin configuration plugin.tx_myexample { settings { # maximum number of posts to display per page postsPerPage = 3 } persistence { storagePid = {$plugin.tx_myexample.persistence.storagePid} } view { templateRootPaths { 0 = {$plugin.tx_myexample.view.templateRootPath} } partialRootPaths { 0 = {$plugin.tx_myexample.view.partialRootPath} } layoutRootPaths { 0 = {$plugin.tx_myexample.view.layoutRootPath} } defaultPid = auto } # This is an example how to modify the translation _LOCAL_LANG { default { someUnusedKey = foo } } } Oops, an error occurred! config.contentObjectExceptionHandler = 0 Get configuration from extension manager Old class was \\TYPO3\\CMS\\Extensionmanager\\Utility\\ConfigurationUtility . $configuration = GeneralUtility::makeInstance(ExtensionConfiguration::class)->get('vidi'); mergeIfNotBlank CMS8 migration Replace 'l10n_mode' => 'mergeIfNotBlank', //TODO: Drop after migration to TYPO3 v8 by 'config' => [ 'behaviour' => [ 'allowLanguageSynchronization' => true ], ], More info: https://forge.typo3.org/issues/79658 ViewHelper snippet \\TYPO3Fluid\\Fluid\\Core\\ViewHelper\\AbstractViewHelper /** * @return void */ public function initializeArguments(): void { $this->registerArgument('newsItem', News::class, 'news item', true) ->registerArgument('settings', 'array', 'Settings', false, []); ->registerArgument('uriOnly', 'bool', 'url only', false, false); } /** * Escapes special characters with their escaped counterparts as needed using PHPs strip_tags() function. * * @param string $value string to format * @return mixed */ public function render($value = null) { return static::renderStatic( [ 'value' => $value ], $this->buildRenderChildrenClosure(), $this->renderingContext ); } /** * Applies strip_tags() on the specified value. * * @param array $arguments * @param \\Closure $renderChildrenClosure * @param \\TYPO3\\CMS\\Fluid\\Core\\Rendering\\RenderingContextInterface $renderingContext * @return string */ public static function renderStatic(array $arguments, \\Closure $renderChildrenClosure, RenderingContextInterface $renderingContext) { $value = $arguments['value']; if ($value === null) { $value = $renderChildrenClosure(); } if (!is_string($value)) { return $value; } return preg_replace('/<p[^>]*>(.*)<\\/p[^>]*>/i', \"$1\", trim($value)); } Deprecated ContentObjectRenderer->TEXT() $cObj->TEXT($config) $cObj->cObjGetSingle('TEXT', $config) Configuration RTE CKEDITOR https://www.thomaskieslich.de/blog/127-typo3-8x-ckeditor-konfigurieren/ https://www.slideshare.net/FransSaris/typo3-create-a-ckeditor-plugin https://www.slideshare.net/FransSaris/htmlarea-to-ckeditor-creates-presets-and-your-own-plugin Configuration options https://docs.typo3.org/typo3cms/CoreApiReference/ExtensionArchitecture/ConfigurationOptions/Index.html $backendConfiguration = (bool)\\TYPO3\\CMS\\Core\\Utility\\GeneralUtility::makeInstance( \\TYPO3\\CMS\\Core\\Configuration\\ExtensionConfiguration::class) ->get('your_extension_key', 'temporaryDirectory'); Loggin in TYPO3 /** @var $logger \\TYPO3\\CMS\\Core\\Log\\Logger */ $logger = \\TYPO3\\CMS\\Core\\Utility\\GeneralUtility::makeInstance(\\TYPO3\\CMS\\Core\\Log\\LogManager::class)->getLogger(__CLASS__); $logger->log(\\TYPO3\\CMS\\Core\\Log\\LogLevel::DEBUG, 'From Fab', ['with data']); File Endings for TypoScript and TSconfig files - Results Default File Endings for TypoScript files is \".typoscript\" TypoScript / UserTSconfig / PageTSconfig should be distinguished throughout the folder structure (not related to how it is named) Default File Endings for TSconfig files (User+Page) is \".tsconfig\" https://decisions.typo3.org/t/file-endings-for-typoscript-and-tsconfig-files-results/71 TYPO3 Console: Getting things done https://typo3worx.eu/2017/05/typo3-console-getting-things-done/ Keystrokes https://notes.typo3.org/p/keystrokes # Development $GLOBALS['TYPO3_CONF_VARS']['SYS']['exceptionalErrors'] = '30711';28674 $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandlerErrors'] = '30711'; # Production $GLOBALS['TYPO3_CONF_VARS']['SYS']['exceptionalErrors'] = '20480'; $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandlerErrors'] = '20480'; @see https://docs.typo3.org/typo3cms/CoreApiReference/latest/ApiOverview/ErrorAndExceptionHandling/Configuration/Index.html FlashMessage for the Core Example: https://review.typo3.org/#/c/36675/4/typo3/sysext/scheduler/Classes/Task/FileStorageExtractionAdditionalFieldProvider.php Extension Manager or Constant Editor #customsubcategory=subcatKey=LLL:EXT:sphinx/Resources/Private/Language/locallang_db.xlf:settings.build.auto_continue; cat=basic/subcatKey/10; type=boolean; label=LLL:EXT:sphinx/Resources/Private/Language/locallang_db.xlf:settings.sphinx.version version = #customcategory=basic=LLL:EXT:sphinx/Resources/Private/Language/locallang_db.xlf:settings.build.auto_continue CLI ./typo3/cli_dispatch.phpsh extbase extension:install code_assistant ./typo3/cli_dispatch.phpsh extbase model:validate --configuration-file ../configuration/CodeAssistant.php Tree in Core (CategoryTreeDataProvider) -> (rootUid) DatabaseTreeDataProvider -> AbstractTableConfigurationTreeDataProvider -> AbstractTreeDataProvider TableConfigurationTree -> Backend\\\\Tree\\\\AbstractTree TreeDataProviderFactory (rootUid) DatabaseTreeNode -> Backend\\\\Tree\\\\TreeRepresentationNode Get TS config from BE User // Hide main modules if set in userTS $hiddenMainModuleList = $GLOBALS['BE_USER']->getTSConfigVal('options.hiddenModules'); $hiddenModules = $GLOBALS['BE_USER']->getTSConfig('options.hiddenModules'); Create new content wizard mod { wizards.newContentElement.wizardItems.plugins { \\#header = LLL:EXT:sitepackage/Resources/Private/Language/newContentElements.xlf:extra elements { tx_vidifrontend_pi1 { iconIdentifier = content-vidi-frontend title = LLL:EXT:vidi_frontend/Resources/Private/Language/locallang.xlf:wizard.title description = LLL:EXT:vidi_frontend/Resources/Private/Language/locallang.xlf:wizard.description tt_content_defValues { CType = list list_type = vidifrontend_pi1 } } } } } Icon Registry /* * Register Icons */ $icons = [ 'content-sitepackage-gichd_carousel' => 'EXT:bootstrap_package/Resources/Public/Icons/ContentElements/carousel-item-html.svg', ]; $iconRegistry = \\TYPO3\\CMS\\Core\\Utility\\GeneralUtility::makeInstance(\\TYPO3\\CMS\\Core\\Imaging\\IconRegistry::class); foreach ($icons as $identifier => $path) { $iconRegistry->registerIcon( $identifier, TYPO3\\CMS\\Core\\Imaging\\IconProvider\\SvgIconProvider::class, ['source' => $path] #? #$identifier, TYPO3\\CMS\\Core\\Imaging\\IconProvider\\BitmapIconProvider::class, ['source' => $path] ); } Blueprints/DistributionManagement http://wiki.typo3.org/Blueprints/DistributionManagement Fluid: Example de recherche pour TYPO3 CMS https://jelastic.com/cloud-hosting-in-switzerland/ FAL - File http://pastebin.com/zYPcWigM Try {file.originalResource.identifier} or {file.originalResource.originalFile.identifier} instead of {file.originalFile.identifier} Signal / slot /** * Signal that is called after equipment creation. * * @param \\TYPO3\\CMS\\Lima\\Domain\\Model\\Equipment $equipment * @signal */ protected function emitAfterCreateEquipmentSignal(\\TYPO3\\CMS\\Lima\\Domain\\Model\\Equipment $equipment) { $this->getSignalSlotDispatcher()->dispatch('TYPO3\\CMS\\Lima\\Controller\\Backend\\EquipmentController', 'afterCreateEquipment', array($equipment)); } /** * Get the SignalSlot dispatcher * * @return \\TYPO3\\CMS\\Extbase\\SignalSlot\\Dispatcher */ protected function getSignalSlotDispatcher() { return $this->objectManager->get('TYPO3\\\\CMS\\\\Extbase\\\\SignalSlot\\\\Dispatcher'); } Object Manager /** * @return object|\\TYPO3\\CMS\\Extbase\\Object\\ObjectManager */ protected function getObjectManager() { return GeneralUtility::makeInstance(\\TYPO3\\CMS\\Extbase\\Object\\ObjectManager::class); } Language Service /** * @return \\TYPO3\\CMS\\Lang\\LanguageService */ protected function getLanguageService() { return $GLOBALS['LANG']; } Content Object /** * @return ContentObjectRenderer */ protected function getContentObject() { return GeneralUtility::makeInstance(ContentObjectRenderer::class); } Button cf. ButtonBar.html pour ToolBar $this->makeLinkButton() ->setHref($this->getNewUri()) ->setTitle($this->getLanguageService()->sL('LLL:EXT:lang/locallang_mod_web_list.xlf:newRecordGeneral')) ->setIcon($this->getIconFactory()->getIcon('actions-document-new', Icon::SIZE_SMALL)) ->render(); /** * Render a create URI given a data type. * * @return string \\*/ protected function getNewUri() { $uri = BackendUtility::getModuleUrl( 'record_edit', array( $this->getNewParameterName() => 'new', 'returnUrl' => $this->getModuleLoader()->getModuleUrl() ) ); return $uri; } /** * @return \\\\TYPO3\\\\CMS\\\\Lang\\\\LanguageService * @throws \\\\InvalidArgumentException \\*/ protected function getLanguageService() { return GeneralUtility::makeInstance(\\\\TYPO3\\\\CMS\\\\Lang\\\\LanguageService::class); } /** * @return LinkButton * @throws \\\\InvalidArgumentException \\*/ protected function makeLinkButton() { return GeneralUtility::makeInstance(LinkButton::class); } /** * @return IconFactory * @throws \\\\InvalidArgumentException \\*/ protected function getIconFactory() { return GeneralUtility::makeInstance(IconFactory::class); } Database connection With Doctrine /** @var Connection $connection */ $connection = GeneralUtility::makeInstance(ConnectionPool::class)->getConnectionForTable('pages'); $pages = $connection->select(['*'], 'pages', ['pid' => 1605])->fetchAll(); Example: https://git.higidi.com/TYPO3/TYPO3.CMS/commit/65e830b42135d7d6a075dc6935347b4eecb463a5 Other examples /*************************************************************/ /** @var \\TYPO3\\CMS\\Core\\Database\\Query\\QueryBuilder $query */ $query = GeneralUtility::makeInstance(ConnectionPool::class) ->getQueryBuilderForTable('tx_teldascompanymgmt_domain_model_company'); $query->getRestrictions()->removeAll(); $company = $query->select('*') ->from('tx_teldascompanymgmt_domain_model_company') ->where( $query->expr()->eq('pid', (int)$page['uid']) ) ->execute() ->fetch(); /*************************************************************/ /** * @param int $uid * @return array */ public function findByUid(int $uid): array { $query = $this->getQueryBuilder(); $query->select('*') ->from($this->tableName) ->where( $this->getQueryBuilder()->expr()->eq( 'uid', $uid ) ); $records = $query->execute()->fetch(); return is_array($records) ? $records : []; } /*************************************************************/ /** * @param array $demand * @return array */ public function findByDemand(array $demand = []): array { /** @var QueryBuilder $query */ $query = $this->getQueryBuilder(); $query->select('*') ->from($this->tableName) ->addOrderBy('uid', 'DESC') ->setMaxResults(20); $expressions = []; foreach ($demand as $fieldName => $value) { if (is_int($value)) { $expressions[] = $query->expr()->eq($fieldName, $value); } elseif (is_string($value)) { $expressions[] = $query->expr()->eq( $fieldName, $query->expr()->literal($value) ); } elseif (is_array($value)) { $expressions[] = $query->expr()->in( $fieldName, $value ); } } foreach ($expressions as $expression) { $query->andWhere($expression); } return $query ->execute() ->fetchAll(); } /*************************************************************/ $orStatement = $query->exp()->orX(); foreach ($values as $value) { $orStatement->add( $query->expr()->eq( 'fieldName', $query->expr()->literal($value) ) ); } $constraints[] = $orStatement; /*************************************************************/ /** * @param string $fieldName * @param $value * @return string */ public function getConstraints(string $fieldName, $value): string { $query = $this->getQueryBuilder($this->tableName); if (is_int($value)) { $expression = $query->expr()->eq($fieldName, $value); } elseif (is_array($value)) { $expression = $query->expr()->in( $fieldName, $value ); } else { $expression = $query->expr()->eq( $fieldName, $query->expr()->literal($value) ); } return $expression; } /*************************************************************/ /** * @param int $pageIdentifier * @return array */ public function getPages(int $pageIdentifier): array { /** @var QueryBuilder $query */ $query = $this->getQueryBuilder('pages'); $query->select('*') ->from('pages') ->andWhere( 'pid = ' . $pageIdentifier, 'doktype IN (1,4)', 'fe_group = \"\"' ) ->where( $queryBuilder->expr()->eq('foo', 0), $queryBuilder->expr()->eq('bar', 0) ) ->addOrderBy('sorting', 'ASC'); // Enable fields are handled manually... #$query->getRestrictions()->removeAll(); return $query ->execute() ->fetchAll(); } /*************************************************************/ /** * @param int $category * @return array */ public function findByCategory(int $category): array { /** @var QueryBuilder $query */ $query = $this->getQueryBuilder('sys_file'); $query->select('*') ->from('sys_file') ->innerJoin( 'sys_file', 'sys_file_metadata', 'sys_file_metadata', 'sys_file.uid = sys_file_metadata.file' ) ->innerJoin( 'sys_file_metadata', 'sys_category_record_mm', 'sys_category_record_mm', 'sys_category_record_mm.uid_foreign = sys_file_metadata.uid AND tablenames = \"sys_file_metadata\" AND fieldname = \"categories\"' ) ->where( $queryBuilder->expr()->eq('sys_category_record_mm.uid_local', $category) ); return $query ->execute() ->fetchAll(); } /*************************************************************/ /** * @param string $tableName * @return object|QueryBuilder */ protected function getQueryBuilder($tableName): QueryBuilder { /** @var ConnectionPool $connectionPool */ $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class); return $connectionPool->getQueryBuilderForTable($tableName); } /*************************************************************/ /** * @param string $tableName * @return object|Connection */ protected function getConnection($tableName): Connection { /** @var ConnectionPool $connectionPool */ $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class); return $connectionPool->getConnectionForTable($tableName); } /*************************************************************/ $connection = $this->getConnection($tableName) $connection->insert( $tableName, [ 'pid' => 1, ] ); $pageUid = (int)$connection->lastInsertId(); /*************************************************************/ /** * Returns a pointer to the database. * DEPRECATED * * @return \\TYPO3\\CMS\\Core\\Database\\DatabaseConnection */ protected function getDatabaseConnection() { return $GLOBALS['TYPO3_DB']; } Content Object <?php namespace Ecodev\\Speciality\\Domain\\Repository; /* * This file is part of the Ecodev/Speciality. project. */ use Fab\\Vidi\\Domain\\Model\\Content; use TYPO3\\CMS\\Core\\SingletonInterface; use TYPO3\\CMS\\Core\\Utility\\GeneralUtility; /** * Class AbstractContentRepository */ abstract class AbstractContentRepository implements SingletonInterface { /** * @var string */ protected $dataType = ''; /** * @param array $records * @return object|Content|null */ protected function convertFirstToContentObject(array $records): ?Content { return empty($records) ? null : GeneralUtility::makeInstance(Content::class, $this->dataType, $records[0]); } /** * @param array $records * @return array */ protected function convertToContentObjects(array $records): array { $contentObjects = []; foreach ($records as $record) { $contentObjects[] = GeneralUtility::makeInstance(Content::class, $this->dataType, $record); } return $contentObjects; } /** * @param string $tableName * @return object|QueryBuilder */ protected function getQueryBuilder($tableName): QueryBuilder { /** @var ConnectionPool $connectionPool */ $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class); return $connectionPool->getQueryBuilderForTable($tableName); } } Enable fields /** * get the WHERE clause for the enabled fields of this TCA table * depending on the context * * @return string the additional where clause, something like \" AND deleted=0 AND hidden=0\" * @throws \\InvalidArgumentException */ protected function getWhereClauseForEnabledFields() { if ($this->isFrontendMode()) { // frontend context $whereClause = $this->getPageRepository()->enableFields($this->tableName); $whereClause .= $this->getPageRepository()->deleteClause($this->tableName); } else { // backend context $whereClause = \\TYPO3\\CMS\\Backend\\Utility\\BackendUtility::BEenableFields($this->tableName); $whereClause .= \\TYPO3\\CMS\\Backend\\Utility\\BackendUtility::deleteClause($this->tableName); } return $whereClause; } TYPO3 Mode /** * Returns whether the current mode is Frontend * * @return bool */ protected function isFrontendMode() { return TYPO3_MODE === 'FE'; } /** * Returns whether the current mode is Backend * * @return bool */ protected function isBackendMode() { return TYPO3_MODE === 'BE'; } Get Time stamp /** * Return current time stamp. * * @return int */ protected function getTimeStamp() { return $GLOBALS['_SERVER']['REQUEST_TIME']; } Frontend User /** * Returns an instance of the current Frontend User. * * @return \\TYPO3\\CMS\\Frontend\\Authentication\\FrontendUserAuthentication */ protected function getFrontendUser() { return $GLOBALS['TSFE']->fe_user; } /** * Returns user data of the current Frontend User. * * @return array */ protected function getFrontendUserData() { return $GLOBALS['TSFE']->fe_user->user ? $GLOBALS['TSFE']->fe_user->user : []; } Frontend Object /** * Returns an instance of the Frontend object. * * @return \\TYPO3\\CMS\\Frontend\\Controller\\TypoScriptFrontendController */ protected function getTypoScriptFrontendController(): TypoScriptFrontendController { return $GLOBALS['TSFE']; } Page Repository /** * Returns an instance of the page repository. * * @return \\TYPO3\\CMS\\Frontend\\Page\\PageRepository */ protected function getPageRepository(): PageRepository { return $GLOBALS['TSFE']->sys_page; } Backend User /** * Returns an instance of the current Backend User. * * @return \\TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication */ protected function getBackendUser() { return $GLOBALS['BE_USER']; } Logging /** * @return \\TYPO3\\CMS\\Core\\Log\\Logger * @throws \\InvalidArgumentException */ protected function getLogger() { /** @var $loggerManager \\TYPO3\\CMS\\Core\\Log\\LogManager */ $loggerManager = GeneralUtility::makeInstance(\\TYPO3\\CMS\\Core\\Log\\LogManager::class); /** @var $logger \\TYPO3\\CMS\\Core\\Log\\Logger */ return $loggerManager->getLogger(get_class($this)); } TypoLink /** @var ContentObjectRenderer $contentObject */ $contentObject = GeneralUtility::makeInstance(ContentObjectRenderer::class); $url = $contentObject->typoLink_URL(['parameter' => 161]); Image Resources /** @var ContentObjectRenderer $contentObject */ $contentObject = GeneralUtility::makeInstance(ContentObjectRenderer::class); $element = $contentObject->cObjGetSingle('IMG_RESOURCE', $conf); Flash messages /** @var FlashMessage $flashMessage */ $flashMessage = GeneralUtility::makeInstance( 'TYPO3\\CMS\\Core\\Messaging\\FlashMessage', \\TYPO3\\CMS\\Extbase\\Utility\\LocalizationUtility::translate( 'message.not_equipment_owner', 'lima' ), '', FlashMessage::ERROR, TRUE ); $this->getControllerContext()->c()->enqueue($flashMessage); <f:flashMessages renderMode=\"div\" class=\"alert alert-success\"/> Normally, must not be class=\"alert alert-success\" but rather compile Bootstrap to recognize \"typo3-message message-ok\" as \"alert alert-success\"\" Access TypoScript Frontend Snippet 1 if (isset($GLOBALS['TSFE'])) { $this->settings = $GLOBALS['TSFE']->tmpl->setup['plugin.']['tx_messenger.']['settings.']; } Unserialize configuration $this->configuration = unserialize($GLOBALS['TYPO3_CONF_VARS']['EXT']['extConf'][$this->extKey]); PATCH <http://wiki.typo3.org/CommitMessage_Format_%28Git%29> 74 words limit -------------- git push origin HEAD:refs/for/master/&lt;forge#> [TASK] Add Domain Model and Repository to Category Description Resolves: #38719 Fixes: #38719 (also possible ?) Releases: 6.0, 6.1 [BUGFIX] Add categorization into the Core Description Fixes: #38711 Releases: 6.0, 6.1 PATH DOCUMENTATION [FEATURE] Add javascriptLibs.jQuery to \"PAGE\" Added possible Typoscript settings for jQuery include. Resolves: #38682 Depends: I7fc130bc5fc7ce5e27b8b58998af3406b26ce45d Forge ----- (fab1en) fabien.udriot@ecodev.ch (fabien_u) fabien@udriot.net (omic) fudriot@omic.ch (fudriot) fabien@ecodev.ch HOOK DECLARATION // Call hook functions for additional constraints if (is_array($GLOBALS['TYPO3_CONF_VARS']['EXT']['news']['Domain/Repository/AbstractDemandedRepository.php']['findDemanded'])) { $params = array( 'demand' => $demand, 'respectEnableFields' => &$respectEnableFields, 'query' => $query, 'constraints' => &$constraints, ); foreach ($GLOBALS['TYPO3_CONF_VARS']['EXT']['news']['Domain/Repository/AbstractDemandedRepository.php']['findDemanded'] as $reference) { GeneralUtility::callUserFunction($reference, $params, $this); } } Hook Plusieurs fa\u00e7on d'utiliser un HOOK & -> utilisation comme un service (singleton) // Must use '&\" with tcemain hook!!! Important for proper work of the hook. \\$TYPO3_CONF_VARS['SC_OPTIONS']['t3lib/class.t3lib_tcemain.php']['processDatamapClass']['tx_realurl'] = 'EXT:realurl/class.tx_realurl_tcemain.php:&tx_realurl_tcemain'; 2. require_once(t3lib_extMgm::extPath('worldtempus').'class.tx_templatedisplay_hook.php'); $GLOBALS['TYPO3_CONF_VARS']['EXTCONF']['dataquery']['postProcessDataStructure'][] = 'tx_templatedisplay_hook'; CHASH comprendre les cHash <http://typo3.org/development/articles/the-mysteries-of-chash/> <http://developpeur-typo3.spaces.live.com/Blog/cns!1B1E3A9303C7C618!260.entry> ARTICLE SEO ASTUCES - CANONICAL lib.canonical = TEXT lib.canonical { typolink { parameter = # value defined in condition useCacheHash = 1 # add all get parameters from the current URL addQueryString = 1 addQueryString.method = GET # remove the page id from the parameters so it is not inserted twice addQueryString.exclude = id returnLast = url } wrap = <link rel=\"canonical\" href=\"https://www.domain.tld/|\" /> } [globalVar = GP:tx_displaycontroller|equipment > 0] page.headerData.930 &lt; lib.canonical page.headerData.930.typolink.parameter = 3614 [global] [globalVar = GP:tx_ttnews|tt_news > 0] page.headerData.930 &lt; lib.canonical page.headerData.930.typolink.parameter = xxx [global] caching Nettoyer le cache (tt_news) TCEMAIN.clearCacheCmd = all TCEMAIN.clearCacheCmd = 45,53,60 (pr\u00e9f\u00e9r\u00e9 cette ligne, car valable pr les non admin) <http://buzz.typo3.org/people/ron-hall/article/dont-wear-out-the-clear-cache-button/> * This value is overridden by the value set in the page-record (field=\"cache_timeout\") if this value is greater than zero. config.cache_period = (int, seconds) (default: 86400 =24H) config.cache_clearAtMidnight = 1 Typical composer.json https://github.com/TYPO3/minimal composer require typo3/minimal","title":"TYPO3 - knowledge base"},{"location":"t3.learn/#deprecation","text":"$pageRenderer->addCssFile( \\TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::extRelPath($this->extKey) . 'Resources/Public/Css/Backend.css' ); $pageRenderer->addCssFile( GeneralUtility::getFileAbsFileName('EXT:teldas_company_mgmt/Resources/Public/Css/Backend.css') );","title":"Deprecation"},{"location":"t3.learn/#iconregistry","text":"/** @var \\TYPO3\\CMS\\Core\\Imaging\\IconFactory $iconFactory */ $iconFactory = GeneralUtility::makeInstance(IconFactory::class); $content[] = $iconFactory->getIcon('extensions-' . $this->extKey . '-user', Icon::SIZE_SMALL)->render();","title":"IconRegistry"},{"location":"t3.learn/#typescript","text":"The patch for issue #87324 was based on outdated tslint configuration, which causes all TypeScript builds to fail. The build is now fixed by executing cd Build ./node_modules/tslint/bin/tslint -c tslint.json --fix --project .","title":"TypeScript"},{"location":"t3.learn/#functional-tests","text":"Functional testing in TYPO3 world is basically the opposite of unit testing: Instead of looking at rather small, isolated pieces of code, functional testing looks at bigger scenarios with many involved dependencies. A typical scenario creates a full instance with some extensions, puts some rows into the database and calls an entry method, for instance a controller action. https://docs.typo3.org/typo3cms/CoreApiReference/Testing/WritingFunctional.html Example: Build/Scripts/runTests.sh -s functional -p 7.3 -d postgres typo3/sysext/core/Tests/Functional/Package/ Based on the Nimut framework feature test. Source of inspiration: https://github.com/cobwebch/external_import/blob/master/Tests/Functional/ImporterTest.php","title":"Functional tests"},{"location":"t3.learn/#acceptance-tests","text":"https://docs.typo3.org/typo3cms/CoreApiReference/Testing/CoreTesting.html#introduction Build/Scripts/runTests.sh -s acceptance typo3/sysext/core/Tests/Acceptance/Backend/Topbar/ https://docs.typo3.org/typo3cms/CoreApiReference/Testing/WritingAcceptance.html Acceptance testing in TYPO3 world is about piloting a browser to click through a frontend generated by TYPO3 or clicking through scenarios in the backend.","title":"Acceptance tests"},{"location":"t3.learn/#phpunit","text":"./bin/phpunit -d memory_limit=1G -c vendor/typo3/testing-framework/Resources/Core/Build/UnitTests.xml","title":"PHPUnit"},{"location":"t3.learn/#typo3-on-docker-for-mac","text":"PERFORMANCE IMPROVEMENTS https://typo3worx.eu/2019/01/performance-improvements-typo3-docker-macos/","title":"TYPO3 ON DOCKER FOR MAC"},{"location":"t3.learn/#typo3-version-chart","text":"http://typo3versions.felixnagel.com/","title":"TYPO3 Version Chart"},{"location":"t3.learn/#rsync","text":"rsync -av cuso:/sites/cuso.ch/htdocs/fileadmin htdocs/ # Or with delete flag rsync -a --delete cuso:/sites/cuso.ch/htdocs/fileadmin htdocs/","title":"Rsync"},{"location":"t3.learn/#api","text":"https://forge.typo3.org/issues/82839","title":"API"},{"location":"t3.learn/#set-debug","text":"$GLOBALS['TYPO3_CONF_VARS']['SYS']['sqlDebug'] = 1; $GLOBALS['TYPO3_CONF_VARS']['FE']['debug'] = 1; $GLOBALS['TYPO3_CONF_VARS']['BE']['debug'] = 1; $GLOBALS['TYPO3_CONF_VARS']['SYS']['displayErrors'] => '1', $GLOBALS['TYPO3_CONF_VARS']['SYS']['devIPmask'] => '*', $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandler'] => 'TYPO3\\\\CMS\\\\Core\\\\Error\\\\ErrorHandler', $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandlerErrors'] => E_ALL ^ E_NOTICE, $GLOBALS['TYPO3_CONF_VARS']['SYS']['exceptionalErrors'] => E_ALL ^ E_NOTICE ^ E_WARNING ^ E_USER_ERROR ^ E_USER_NOTICE ^ E_USER_WARNING, $GLOBALS['TYPO3_CONF_VARS']['SYS']['debugExceptionHandler'] => 'TYPO3\\\\CMS\\\\Core\\\\Error\\\\DebugExceptionHandler', $GLOBALS['TYPO3_CONF_VARS']['SYS']['productionExceptionHandler'] => 'TYPO3\\\\CMS\\\\Core\\\\Error\\\\DebugExceptionHandler', $GLOBALS['TYPO3_CONF_VARS']['SYS']['systemLogLevel'] => '0', $GLOBALS['TYPO3_CONF_VARS']['SYS']['systemLog'] => true,","title":"Set debug"},{"location":"t3.learn/#copyright","text":"/* * This file is part of the Fab/. project. */ /* * This file is part of the Fab/. project under GPLv2 or later. * * For the full copyright and license information, please read the * LICENSE.md file that was distributed with this source code. */","title":"Copyright"},{"location":"t3.learn/#debug","text":"if ($_SERVER['REMOTE_ADDR'] === '195.141.130.142') { } 'SYS' => [ 'devIPmask' => '127.0.0.1,::1,194.38.181.219,212.41.199.98,105.235.188.211', ]","title":"Debug"},{"location":"t3.learn/#ext_localconfphp","text":"<?php defined('TYPO3_MODE') || die('Access denied.'); call_user_func( function () { // Setting up scripts that can be run from the cli_dispatch.phpsh script. $GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['extbase']['commandControllers'][] = \\Cobweb\\GichdLitmos\\Command\\LitmosCommandController::class; } );","title":"ext_localconf.php"},{"location":"t3.learn/#create-a-new-extension","text":"Boilerplate code to write a new extension @new-extension-- # ext_localconf.php: defined('TYPO3_MODE') || die('Access denied.'); call_user_func( function() { \\TYPO3\\CMS\\Extbase\\Utility\\ExtensionUtility::configurePlugin ( 'Vendor.MyExtension', 'ExamplePlugin', [ 'Document' => 'list, show' ], // non-cacheable actions [ 'Document' => 'list' ] ); } ); ext_tables.php Configuration/TCA/Overrides/tt_content.php defined('TYPO3_MODE') || die('Access denied.'); call_user_func( function() { // Load TypoScript for this extension \\TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::addStaticFile( 'my_extension', 'Configuration/TypoScript', 'GICHD Package : bla' ); \\TYPO3\\CMS\\Extbase\\Utility\\ExtensionUtility::registerPlugin ( 'Vendor.MyExtension', 'ExamplePlugin', 'My title', 'EXT:my_example/Resources/Public/Icons/Extension.svg' ); $GLOBALS['TCA']['tt_content']['types']['list']['subtypes_excludelist']['myextension_exampleplugin'] = 'layout,recursive,select_key,pages'; $GLOBALS['TCA']['tt_content']['types']['list']['subtypes_addlist']['myextension_exampleplugin'] = 'pi_flexform,recursive'; TYPO3\\CMS\\Core\\Utility\\GeneralUtility::addPiFlexFormValue('myextension_exampleplugin', 'FILE:EXT:my_example/Configuration/FlexForms/flexform_list.xml'); } ); In Classes/Controller/MyController.php <?php namespace Ecodev\\Speciality\\Controller; /* * This file is part of the Ecodev/Speciality project under GPLv2 or later. */ use TYPO3\\CMS\\Extbase\\Mvc\\Controller\\ActionController; /** * Class DocumentController */ class DocumentController extends ActionController { /** * */ public function listAction() { return '123'; } } In Resources/Private/Templates/Document/List.html <html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en\" xmlns:v=\"http://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers\" xmlns:f=\"http://typo3.org/ns/fluid/ViewHelpers\"> ciao bello! </html> In configuration/TypoScript/constants.typoscript plugin.tx_myexample { settings { # cat=plugin.tx_myexample/a; type=int+; label=Editor FE Usergroup uid:Enter the uid of the FE Usergroup that should be allowed to edit Blogs and Post in the frontend editorUsergroupUid = 1 } view { # cat=plugin.tx_myexample/file; type=string; label=Path to template root (FE) templateRootPath = EXT:my_example/Resources/Private/Templates/ # cat=plugin.tx_myexample/file; type=string; label=Path to template partials (FE) partialRootPath = EXT:my_example/Resources/Private/Partials/ # cat=plugin.tx_myexample/file; type=string; label=Path to template layouts (FE) layoutRootPath = EXT:my_example/Resources/Private/Layouts/ } persistence { # cat=plugin.tx_myexample//a; type=int+; label=Default storage PID storagePid = } } In Configuration/TypoScript/setup.typoscript # Plugin configuration plugin.tx_myexample { settings { # maximum number of posts to display per page postsPerPage = 3 } persistence { storagePid = {$plugin.tx_myexample.persistence.storagePid} } view { templateRootPaths { 0 = {$plugin.tx_myexample.view.templateRootPath} } partialRootPaths { 0 = {$plugin.tx_myexample.view.partialRootPath} } layoutRootPaths { 0 = {$plugin.tx_myexample.view.layoutRootPath} } defaultPid = auto } # This is an example how to modify the translation _LOCAL_LANG { default { someUnusedKey = foo } } }","title":"Create a new extension"},{"location":"t3.learn/#oops-an-error-occurred","text":"config.contentObjectExceptionHandler = 0","title":"Oops, an error occurred!"},{"location":"t3.learn/#get-configuration-from-extension-manager","text":"Old class was \\TYPO3\\CMS\\Extensionmanager\\Utility\\ConfigurationUtility . $configuration = GeneralUtility::makeInstance(ExtensionConfiguration::class)->get('vidi');","title":"Get configuration from extension manager"},{"location":"t3.learn/#mergeifnotblank-cms8-migration","text":"Replace 'l10n_mode' => 'mergeIfNotBlank', //TODO: Drop after migration to TYPO3 v8 by 'config' => [ 'behaviour' => [ 'allowLanguageSynchronization' => true ], ], More info: https://forge.typo3.org/issues/79658","title":"mergeIfNotBlank CMS8 migration"},{"location":"t3.learn/#viewhelper-snippet","text":"\\TYPO3Fluid\\Fluid\\Core\\ViewHelper\\AbstractViewHelper /** * @return void */ public function initializeArguments(): void { $this->registerArgument('newsItem', News::class, 'news item', true) ->registerArgument('settings', 'array', 'Settings', false, []); ->registerArgument('uriOnly', 'bool', 'url only', false, false); } /** * Escapes special characters with their escaped counterparts as needed using PHPs strip_tags() function. * * @param string $value string to format * @return mixed */ public function render($value = null) { return static::renderStatic( [ 'value' => $value ], $this->buildRenderChildrenClosure(), $this->renderingContext ); } /** * Applies strip_tags() on the specified value. * * @param array $arguments * @param \\Closure $renderChildrenClosure * @param \\TYPO3\\CMS\\Fluid\\Core\\Rendering\\RenderingContextInterface $renderingContext * @return string */ public static function renderStatic(array $arguments, \\Closure $renderChildrenClosure, RenderingContextInterface $renderingContext) { $value = $arguments['value']; if ($value === null) { $value = $renderChildrenClosure(); } if (!is_string($value)) { return $value; } return preg_replace('/<p[^>]*>(.*)<\\/p[^>]*>/i', \"$1\", trim($value)); }","title":"ViewHelper snippet"},{"location":"t3.learn/#deprecated-contentobjectrenderer-text","text":"$cObj->TEXT($config) $cObj->cObjGetSingle('TEXT', $config)","title":"Deprecated ContentObjectRenderer-&gt;TEXT()"},{"location":"t3.learn/#configuration-rte-ckeditor","text":"https://www.thomaskieslich.de/blog/127-typo3-8x-ckeditor-konfigurieren/ https://www.slideshare.net/FransSaris/typo3-create-a-ckeditor-plugin https://www.slideshare.net/FransSaris/htmlarea-to-ckeditor-creates-presets-and-your-own-plugin","title":"Configuration RTE CKEDITOR"},{"location":"t3.learn/#configuration-options","text":"https://docs.typo3.org/typo3cms/CoreApiReference/ExtensionArchitecture/ConfigurationOptions/Index.html $backendConfiguration = (bool)\\TYPO3\\CMS\\Core\\Utility\\GeneralUtility::makeInstance( \\TYPO3\\CMS\\Core\\Configuration\\ExtensionConfiguration::class) ->get('your_extension_key', 'temporaryDirectory');","title":"Configuration options"},{"location":"t3.learn/#loggin-in-typo3","text":"/** @var $logger \\TYPO3\\CMS\\Core\\Log\\Logger */ $logger = \\TYPO3\\CMS\\Core\\Utility\\GeneralUtility::makeInstance(\\TYPO3\\CMS\\Core\\Log\\LogManager::class)->getLogger(__CLASS__); $logger->log(\\TYPO3\\CMS\\Core\\Log\\LogLevel::DEBUG, 'From Fab', ['with data']);","title":"Loggin in TYPO3"},{"location":"t3.learn/#file-endings-for-typoscript-and-tsconfig-files-results","text":"Default File Endings for TypoScript files is \".typoscript\" TypoScript / UserTSconfig / PageTSconfig should be distinguished throughout the folder structure (not related to how it is named) Default File Endings for TSconfig files (User+Page) is \".tsconfig\" https://decisions.typo3.org/t/file-endings-for-typoscript-and-tsconfig-files-results/71","title":"File Endings for TypoScript and TSconfig files - Results"},{"location":"t3.learn/#typo3-console-getting-things-done","text":"https://typo3worx.eu/2017/05/typo3-console-getting-things-done/","title":"TYPO3 Console: Getting things done"},{"location":"t3.learn/#keystrokes","text":"https://notes.typo3.org/p/keystrokes # Development $GLOBALS['TYPO3_CONF_VARS']['SYS']['exceptionalErrors'] = '30711';28674 $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandlerErrors'] = '30711'; # Production $GLOBALS['TYPO3_CONF_VARS']['SYS']['exceptionalErrors'] = '20480'; $GLOBALS['TYPO3_CONF_VARS']['SYS']['errorHandlerErrors'] = '20480'; @see https://docs.typo3.org/typo3cms/CoreApiReference/latest/ApiOverview/ErrorAndExceptionHandling/Configuration/Index.html","title":"Keystrokes"},{"location":"t3.learn/#flashmessage-for-the-core","text":"Example: https://review.typo3.org/#/c/36675/4/typo3/sysext/scheduler/Classes/Task/FileStorageExtractionAdditionalFieldProvider.php","title":"FlashMessage for the Core"},{"location":"t3.learn/#extension-manager-or-constant-editor","text":"#customsubcategory=subcatKey=LLL:EXT:sphinx/Resources/Private/Language/locallang_db.xlf:settings.build.auto_continue; cat=basic/subcatKey/10; type=boolean; label=LLL:EXT:sphinx/Resources/Private/Language/locallang_db.xlf:settings.sphinx.version version = #customcategory=basic=LLL:EXT:sphinx/Resources/Private/Language/locallang_db.xlf:settings.build.auto_continue","title":"Extension Manager or Constant Editor"},{"location":"t3.learn/#cli","text":"./typo3/cli_dispatch.phpsh extbase extension:install code_assistant ./typo3/cli_dispatch.phpsh extbase model:validate --configuration-file ../configuration/CodeAssistant.php","title":"CLI"},{"location":"t3.learn/#tree-in-core","text":"(CategoryTreeDataProvider) -> (rootUid) DatabaseTreeDataProvider -> AbstractTableConfigurationTreeDataProvider -> AbstractTreeDataProvider TableConfigurationTree -> Backend\\\\Tree\\\\AbstractTree TreeDataProviderFactory (rootUid) DatabaseTreeNode -> Backend\\\\Tree\\\\TreeRepresentationNode","title":"Tree in Core"},{"location":"t3.learn/#get-ts-config-from-be-user","text":"// Hide main modules if set in userTS $hiddenMainModuleList = $GLOBALS['BE_USER']->getTSConfigVal('options.hiddenModules'); $hiddenModules = $GLOBALS['BE_USER']->getTSConfig('options.hiddenModules');","title":"Get TS config from BE User"},{"location":"t3.learn/#create-new-content-wizard","text":"mod { wizards.newContentElement.wizardItems.plugins { \\#header = LLL:EXT:sitepackage/Resources/Private/Language/newContentElements.xlf:extra elements { tx_vidifrontend_pi1 { iconIdentifier = content-vidi-frontend title = LLL:EXT:vidi_frontend/Resources/Private/Language/locallang.xlf:wizard.title description = LLL:EXT:vidi_frontend/Resources/Private/Language/locallang.xlf:wizard.description tt_content_defValues { CType = list list_type = vidifrontend_pi1 } } } } }","title":"Create new content wizard"},{"location":"t3.learn/#icon-registry","text":"/* * Register Icons */ $icons = [ 'content-sitepackage-gichd_carousel' => 'EXT:bootstrap_package/Resources/Public/Icons/ContentElements/carousel-item-html.svg', ]; $iconRegistry = \\TYPO3\\CMS\\Core\\Utility\\GeneralUtility::makeInstance(\\TYPO3\\CMS\\Core\\Imaging\\IconRegistry::class); foreach ($icons as $identifier => $path) { $iconRegistry->registerIcon( $identifier, TYPO3\\CMS\\Core\\Imaging\\IconProvider\\SvgIconProvider::class, ['source' => $path] #? #$identifier, TYPO3\\CMS\\Core\\Imaging\\IconProvider\\BitmapIconProvider::class, ['source' => $path] ); }","title":"Icon Registry"},{"location":"t3.learn/#blueprintsdistributionmanagement","text":"http://wiki.typo3.org/Blueprints/DistributionManagement Fluid:","title":"Blueprints/DistributionManagement"},{"location":"t3.learn/#example-de-recherche-pour-typo3-cms","text":"https://jelastic.com/cloud-hosting-in-switzerland/","title":"Example de recherche pour TYPO3 CMS"},{"location":"t3.learn/#fal-file","text":"http://pastebin.com/zYPcWigM Try {file.originalResource.identifier} or {file.originalResource.originalFile.identifier} instead of {file.originalFile.identifier}","title":"FAL - File"},{"location":"t3.learn/#signal-slot","text":"/** * Signal that is called after equipment creation. * * @param \\TYPO3\\CMS\\Lima\\Domain\\Model\\Equipment $equipment * @signal */ protected function emitAfterCreateEquipmentSignal(\\TYPO3\\CMS\\Lima\\Domain\\Model\\Equipment $equipment) { $this->getSignalSlotDispatcher()->dispatch('TYPO3\\CMS\\Lima\\Controller\\Backend\\EquipmentController', 'afterCreateEquipment', array($equipment)); } /** * Get the SignalSlot dispatcher * * @return \\TYPO3\\CMS\\Extbase\\SignalSlot\\Dispatcher */ protected function getSignalSlotDispatcher() { return $this->objectManager->get('TYPO3\\\\CMS\\\\Extbase\\\\SignalSlot\\\\Dispatcher'); }","title":"Signal / slot"},{"location":"t3.learn/#object-manager","text":"/** * @return object|\\TYPO3\\CMS\\Extbase\\Object\\ObjectManager */ protected function getObjectManager() { return GeneralUtility::makeInstance(\\TYPO3\\CMS\\Extbase\\Object\\ObjectManager::class); }","title":"Object Manager"},{"location":"t3.learn/#language-service","text":"/** * @return \\TYPO3\\CMS\\Lang\\LanguageService */ protected function getLanguageService() { return $GLOBALS['LANG']; }","title":"Language Service"},{"location":"t3.learn/#content-object","text":"/** * @return ContentObjectRenderer */ protected function getContentObject() { return GeneralUtility::makeInstance(ContentObjectRenderer::class); }","title":"Content Object"},{"location":"t3.learn/#button","text":"cf. ButtonBar.html pour ToolBar $this->makeLinkButton() ->setHref($this->getNewUri()) ->setTitle($this->getLanguageService()->sL('LLL:EXT:lang/locallang_mod_web_list.xlf:newRecordGeneral')) ->setIcon($this->getIconFactory()->getIcon('actions-document-new', Icon::SIZE_SMALL)) ->render(); /** * Render a create URI given a data type. * * @return string \\*/ protected function getNewUri() { $uri = BackendUtility::getModuleUrl( 'record_edit', array( $this->getNewParameterName() => 'new', 'returnUrl' => $this->getModuleLoader()->getModuleUrl() ) ); return $uri; } /** * @return \\\\TYPO3\\\\CMS\\\\Lang\\\\LanguageService * @throws \\\\InvalidArgumentException \\*/ protected function getLanguageService() { return GeneralUtility::makeInstance(\\\\TYPO3\\\\CMS\\\\Lang\\\\LanguageService::class); } /** * @return LinkButton * @throws \\\\InvalidArgumentException \\*/ protected function makeLinkButton() { return GeneralUtility::makeInstance(LinkButton::class); } /** * @return IconFactory * @throws \\\\InvalidArgumentException \\*/ protected function getIconFactory() { return GeneralUtility::makeInstance(IconFactory::class); }","title":"Button"},{"location":"t3.learn/#database-connection","text":"","title":"Database connection"},{"location":"t3.learn/#with-doctrine","text":"/** @var Connection $connection */ $connection = GeneralUtility::makeInstance(ConnectionPool::class)->getConnectionForTable('pages'); $pages = $connection->select(['*'], 'pages', ['pid' => 1605])->fetchAll(); Example: https://git.higidi.com/TYPO3/TYPO3.CMS/commit/65e830b42135d7d6a075dc6935347b4eecb463a5 Other examples /*************************************************************/ /** @var \\TYPO3\\CMS\\Core\\Database\\Query\\QueryBuilder $query */ $query = GeneralUtility::makeInstance(ConnectionPool::class) ->getQueryBuilderForTable('tx_teldascompanymgmt_domain_model_company'); $query->getRestrictions()->removeAll(); $company = $query->select('*') ->from('tx_teldascompanymgmt_domain_model_company') ->where( $query->expr()->eq('pid', (int)$page['uid']) ) ->execute() ->fetch(); /*************************************************************/ /** * @param int $uid * @return array */ public function findByUid(int $uid): array { $query = $this->getQueryBuilder(); $query->select('*') ->from($this->tableName) ->where( $this->getQueryBuilder()->expr()->eq( 'uid', $uid ) ); $records = $query->execute()->fetch(); return is_array($records) ? $records : []; } /*************************************************************/ /** * @param array $demand * @return array */ public function findByDemand(array $demand = []): array { /** @var QueryBuilder $query */ $query = $this->getQueryBuilder(); $query->select('*') ->from($this->tableName) ->addOrderBy('uid', 'DESC') ->setMaxResults(20); $expressions = []; foreach ($demand as $fieldName => $value) { if (is_int($value)) { $expressions[] = $query->expr()->eq($fieldName, $value); } elseif (is_string($value)) { $expressions[] = $query->expr()->eq( $fieldName, $query->expr()->literal($value) ); } elseif (is_array($value)) { $expressions[] = $query->expr()->in( $fieldName, $value ); } } foreach ($expressions as $expression) { $query->andWhere($expression); } return $query ->execute() ->fetchAll(); } /*************************************************************/ $orStatement = $query->exp()->orX(); foreach ($values as $value) { $orStatement->add( $query->expr()->eq( 'fieldName', $query->expr()->literal($value) ) ); } $constraints[] = $orStatement; /*************************************************************/ /** * @param string $fieldName * @param $value * @return string */ public function getConstraints(string $fieldName, $value): string { $query = $this->getQueryBuilder($this->tableName); if (is_int($value)) { $expression = $query->expr()->eq($fieldName, $value); } elseif (is_array($value)) { $expression = $query->expr()->in( $fieldName, $value ); } else { $expression = $query->expr()->eq( $fieldName, $query->expr()->literal($value) ); } return $expression; } /*************************************************************/ /** * @param int $pageIdentifier * @return array */ public function getPages(int $pageIdentifier): array { /** @var QueryBuilder $query */ $query = $this->getQueryBuilder('pages'); $query->select('*') ->from('pages') ->andWhere( 'pid = ' . $pageIdentifier, 'doktype IN (1,4)', 'fe_group = \"\"' ) ->where( $queryBuilder->expr()->eq('foo', 0), $queryBuilder->expr()->eq('bar', 0) ) ->addOrderBy('sorting', 'ASC'); // Enable fields are handled manually... #$query->getRestrictions()->removeAll(); return $query ->execute() ->fetchAll(); } /*************************************************************/ /** * @param int $category * @return array */ public function findByCategory(int $category): array { /** @var QueryBuilder $query */ $query = $this->getQueryBuilder('sys_file'); $query->select('*') ->from('sys_file') ->innerJoin( 'sys_file', 'sys_file_metadata', 'sys_file_metadata', 'sys_file.uid = sys_file_metadata.file' ) ->innerJoin( 'sys_file_metadata', 'sys_category_record_mm', 'sys_category_record_mm', 'sys_category_record_mm.uid_foreign = sys_file_metadata.uid AND tablenames = \"sys_file_metadata\" AND fieldname = \"categories\"' ) ->where( $queryBuilder->expr()->eq('sys_category_record_mm.uid_local', $category) ); return $query ->execute() ->fetchAll(); } /*************************************************************/ /** * @param string $tableName * @return object|QueryBuilder */ protected function getQueryBuilder($tableName): QueryBuilder { /** @var ConnectionPool $connectionPool */ $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class); return $connectionPool->getQueryBuilderForTable($tableName); } /*************************************************************/ /** * @param string $tableName * @return object|Connection */ protected function getConnection($tableName): Connection { /** @var ConnectionPool $connectionPool */ $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class); return $connectionPool->getConnectionForTable($tableName); } /*************************************************************/ $connection = $this->getConnection($tableName) $connection->insert( $tableName, [ 'pid' => 1, ] ); $pageUid = (int)$connection->lastInsertId(); /*************************************************************/ /** * Returns a pointer to the database. * DEPRECATED * * @return \\TYPO3\\CMS\\Core\\Database\\DatabaseConnection */ protected function getDatabaseConnection() { return $GLOBALS['TYPO3_DB']; }","title":"With Doctrine"},{"location":"t3.learn/#content-object_1","text":"<?php namespace Ecodev\\Speciality\\Domain\\Repository; /* * This file is part of the Ecodev/Speciality. project. */ use Fab\\Vidi\\Domain\\Model\\Content; use TYPO3\\CMS\\Core\\SingletonInterface; use TYPO3\\CMS\\Core\\Utility\\GeneralUtility; /** * Class AbstractContentRepository */ abstract class AbstractContentRepository implements SingletonInterface { /** * @var string */ protected $dataType = ''; /** * @param array $records * @return object|Content|null */ protected function convertFirstToContentObject(array $records): ?Content { return empty($records) ? null : GeneralUtility::makeInstance(Content::class, $this->dataType, $records[0]); } /** * @param array $records * @return array */ protected function convertToContentObjects(array $records): array { $contentObjects = []; foreach ($records as $record) { $contentObjects[] = GeneralUtility::makeInstance(Content::class, $this->dataType, $record); } return $contentObjects; } /** * @param string $tableName * @return object|QueryBuilder */ protected function getQueryBuilder($tableName): QueryBuilder { /** @var ConnectionPool $connectionPool */ $connectionPool = GeneralUtility::makeInstance(ConnectionPool::class); return $connectionPool->getQueryBuilderForTable($tableName); } }","title":"Content Object"},{"location":"t3.learn/#enable-fields","text":"/** * get the WHERE clause for the enabled fields of this TCA table * depending on the context * * @return string the additional where clause, something like \" AND deleted=0 AND hidden=0\" * @throws \\InvalidArgumentException */ protected function getWhereClauseForEnabledFields() { if ($this->isFrontendMode()) { // frontend context $whereClause = $this->getPageRepository()->enableFields($this->tableName); $whereClause .= $this->getPageRepository()->deleteClause($this->tableName); } else { // backend context $whereClause = \\TYPO3\\CMS\\Backend\\Utility\\BackendUtility::BEenableFields($this->tableName); $whereClause .= \\TYPO3\\CMS\\Backend\\Utility\\BackendUtility::deleteClause($this->tableName); } return $whereClause; }","title":"Enable fields"},{"location":"t3.learn/#typo3-mode","text":"/** * Returns whether the current mode is Frontend * * @return bool */ protected function isFrontendMode() { return TYPO3_MODE === 'FE'; } /** * Returns whether the current mode is Backend * * @return bool */ protected function isBackendMode() { return TYPO3_MODE === 'BE'; }","title":"TYPO3 Mode"},{"location":"t3.learn/#get-time-stamp","text":"/** * Return current time stamp. * * @return int */ protected function getTimeStamp() { return $GLOBALS['_SERVER']['REQUEST_TIME']; }","title":"Get Time stamp"},{"location":"t3.learn/#frontend-user","text":"/** * Returns an instance of the current Frontend User. * * @return \\TYPO3\\CMS\\Frontend\\Authentication\\FrontendUserAuthentication */ protected function getFrontendUser() { return $GLOBALS['TSFE']->fe_user; } /** * Returns user data of the current Frontend User. * * @return array */ protected function getFrontendUserData() { return $GLOBALS['TSFE']->fe_user->user ? $GLOBALS['TSFE']->fe_user->user : []; }","title":"Frontend User"},{"location":"t3.learn/#frontend-object","text":"/** * Returns an instance of the Frontend object. * * @return \\TYPO3\\CMS\\Frontend\\Controller\\TypoScriptFrontendController */ protected function getTypoScriptFrontendController(): TypoScriptFrontendController { return $GLOBALS['TSFE']; }","title":"Frontend Object"},{"location":"t3.learn/#page-repository","text":"/** * Returns an instance of the page repository. * * @return \\TYPO3\\CMS\\Frontend\\Page\\PageRepository */ protected function getPageRepository(): PageRepository { return $GLOBALS['TSFE']->sys_page; }","title":"Page Repository"},{"location":"t3.learn/#backend-user","text":"/** * Returns an instance of the current Backend User. * * @return \\TYPO3\\CMS\\Core\\Authentication\\BackendUserAuthentication */ protected function getBackendUser() { return $GLOBALS['BE_USER']; }","title":"Backend User"},{"location":"t3.learn/#logging","text":"/** * @return \\TYPO3\\CMS\\Core\\Log\\Logger * @throws \\InvalidArgumentException */ protected function getLogger() { /** @var $loggerManager \\TYPO3\\CMS\\Core\\Log\\LogManager */ $loggerManager = GeneralUtility::makeInstance(\\TYPO3\\CMS\\Core\\Log\\LogManager::class); /** @var $logger \\TYPO3\\CMS\\Core\\Log\\Logger */ return $loggerManager->getLogger(get_class($this)); }","title":"Logging"},{"location":"t3.learn/#typolink","text":"/** @var ContentObjectRenderer $contentObject */ $contentObject = GeneralUtility::makeInstance(ContentObjectRenderer::class); $url = $contentObject->typoLink_URL(['parameter' => 161]);","title":"TypoLink"},{"location":"t3.learn/#image-resources","text":"/** @var ContentObjectRenderer $contentObject */ $contentObject = GeneralUtility::makeInstance(ContentObjectRenderer::class); $element = $contentObject->cObjGetSingle('IMG_RESOURCE', $conf);","title":"Image Resources"},{"location":"t3.learn/#flash-messages","text":"/** @var FlashMessage $flashMessage */ $flashMessage = GeneralUtility::makeInstance( 'TYPO3\\CMS\\Core\\Messaging\\FlashMessage', \\TYPO3\\CMS\\Extbase\\Utility\\LocalizationUtility::translate( 'message.not_equipment_owner', 'lima' ), '', FlashMessage::ERROR, TRUE ); $this->getControllerContext()->c()->enqueue($flashMessage); <f:flashMessages renderMode=\"div\" class=\"alert alert-success\"/> Normally, must not be class=\"alert alert-success\" but rather compile Bootstrap to recognize \"typo3-message message-ok\" as \"alert alert-success\"\"","title":"Flash messages"},{"location":"t3.learn/#access-typoscript-frontend","text":"Snippet 1 if (isset($GLOBALS['TSFE'])) { $this->settings = $GLOBALS['TSFE']->tmpl->setup['plugin.']['tx_messenger.']['settings.']; }","title":"Access TypoScript Frontend"},{"location":"t3.learn/#unserialize-configuration","text":"$this->configuration = unserialize($GLOBALS['TYPO3_CONF_VARS']['EXT']['extConf'][$this->extKey]);","title":"Unserialize configuration"},{"location":"t3.learn/#patch","text":"<http://wiki.typo3.org/CommitMessage_Format_%28Git%29> 74 words limit -------------- git push origin HEAD:refs/for/master/&lt;forge#> [TASK] Add Domain Model and Repository to Category Description Resolves: #38719 Fixes: #38719 (also possible ?) Releases: 6.0, 6.1 [BUGFIX] Add categorization into the Core Description Fixes: #38711 Releases: 6.0, 6.1","title":"PATCH"},{"location":"t3.learn/#path-documentation","text":"[FEATURE] Add javascriptLibs.jQuery to \"PAGE\" Added possible Typoscript settings for jQuery include. Resolves: #38682 Depends: I7fc130bc5fc7ce5e27b8b58998af3406b26ce45d Forge ----- (fab1en) fabien.udriot@ecodev.ch (fabien_u) fabien@udriot.net (omic) fudriot@omic.ch (fudriot) fabien@ecodev.ch","title":"PATH DOCUMENTATION"},{"location":"t3.learn/#hook-declaration","text":"// Call hook functions for additional constraints if (is_array($GLOBALS['TYPO3_CONF_VARS']['EXT']['news']['Domain/Repository/AbstractDemandedRepository.php']['findDemanded'])) { $params = array( 'demand' => $demand, 'respectEnableFields' => &$respectEnableFields, 'query' => $query, 'constraints' => &$constraints, ); foreach ($GLOBALS['TYPO3_CONF_VARS']['EXT']['news']['Domain/Repository/AbstractDemandedRepository.php']['findDemanded'] as $reference) { GeneralUtility::callUserFunction($reference, $params, $this); } }","title":"HOOK DECLARATION"},{"location":"t3.learn/#hook","text":"Plusieurs fa\u00e7on d'utiliser un HOOK & -> utilisation comme un service (singleton) // Must use '&\" with tcemain hook!!! Important for proper work of the hook. \\$TYPO3_CONF_VARS['SC_OPTIONS']['t3lib/class.t3lib_tcemain.php']['processDatamapClass']['tx_realurl'] = 'EXT:realurl/class.tx_realurl_tcemain.php:&tx_realurl_tcemain'; 2. require_once(t3lib_extMgm::extPath('worldtempus').'class.tx_templatedisplay_hook.php'); $GLOBALS['TYPO3_CONF_VARS']['EXTCONF']['dataquery']['postProcessDataStructure'][] = 'tx_templatedisplay_hook';","title":"Hook"},{"location":"t3.learn/#chash","text":"comprendre les cHash <http://typo3.org/development/articles/the-mysteries-of-chash/> <http://developpeur-typo3.spaces.live.com/Blog/cns!1B1E3A9303C7C618!260.entry>","title":"CHASH"},{"location":"t3.learn/#article-seo-astuces-canonical","text":"lib.canonical = TEXT lib.canonical { typolink { parameter = # value defined in condition useCacheHash = 1 # add all get parameters from the current URL addQueryString = 1 addQueryString.method = GET # remove the page id from the parameters so it is not inserted twice addQueryString.exclude = id returnLast = url } wrap = <link rel=\"canonical\" href=\"https://www.domain.tld/|\" /> } [globalVar = GP:tx_displaycontroller|equipment > 0] page.headerData.930 &lt; lib.canonical page.headerData.930.typolink.parameter = 3614 [global] [globalVar = GP:tx_ttnews|tt_news > 0] page.headerData.930 &lt; lib.canonical page.headerData.930.typolink.parameter = xxx [global]","title":"ARTICLE SEO ASTUCES - CANONICAL"},{"location":"t3.learn/#caching","text":"Nettoyer le cache (tt_news) TCEMAIN.clearCacheCmd = all TCEMAIN.clearCacheCmd = 45,53,60 (pr\u00e9f\u00e9r\u00e9 cette ligne, car valable pr les non admin) <http://buzz.typo3.org/people/ron-hall/article/dont-wear-out-the-clear-cache-button/> * This value is overridden by the value set in the page-record (field=\"cache_timeout\") if this value is greater than zero. config.cache_period = (int, seconds) (default: 86400 =24H) config.cache_clearAtMidnight = 1","title":"caching"},{"location":"t3.learn/#typical-composerjson","text":"https://github.com/TYPO3/minimal composer require typo3/minimal","title":"Typical composer.json"}]}